(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"7UCR":function(e,t,i){"use strict";i.r(t),i.d(t,"FrontendModule",(function(){return Xe}));var n=i("ofXK"),a=i("tyNb"),r=i("tQXo"),c=i("jraZ"),l=i("fXoL"),o=i("ypjD"),s=i("aYsf"),b=i("13Ll"),d=i("lQeB");function u(e,t){if(1&e&&(l.Rb(0,"li",18),l.Rb(1,"a",4),l.Nb(2,"i",19),l.Rb(3,"span",6),l.tc(4,"Avilablity"),l.Qb(),l.Qb(),l.Qb()),2&e){const e=l.bc();l.gc("routerLink","avilablity/",null==e.allService[0]?null:e.allService[0]._id,"")}}function p(e,t){if(1&e&&(l.Rb(0,"li",18),l.Rb(1,"a",4),l.Nb(2,"i",20),l.Rb(3,"span",6),l.tc(4,"Appointment"),l.Qb(),l.Qb(),l.Qb()),2&e){const e=l.bc();l.gc("routerLink","appointment/",null==e.allService[0]?null:e.allService[0]._id,"")}}let h=(()=>{class e{constructor(e,t,i){this.themeChangeService=e,this.bs=t,this.avaliabiltyReloadService=i,this.showAvailablity=!1}ngOnInit(){this.theme=localStorage.getItem("theme"),this.themeChange(),this.userId=this.bs.token().id,this.allServiceOfUser(),this.AvaliabiltyReload()}themeChange(){this.themeChangeService.themeLoad$.subscribe(e=>this.theme=e)}allServiceOfUser(){this.bs.allServiceOfUser({userId:this.userId}).subscribe(e=>{this.allService=e,e.length>0&&(this.showAvailablity=!0)},e=>{console.log(e)})}AvaliabiltyReload(){this.avaliabiltyReloadService.ReloadService$.subscribe(e=>{1==e&&this.allServiceOfUser()})}}return e.\u0275fac=function(t){return new(t||e)(l.Mb(s.a),l.Mb(o.a),l.Mb(d.a))},e.\u0275cmp=l.Gb({type:e,selectors:[["app-sidebar"]],inputs:{hideSidebar:"hideSidebar"},decls:35,vars:7,consts:[["id","sidebar"],[1,"sidebar-content-wrapper","sidebar-offcanvas"],[1,"nav"],["routerLink","home","routerLinkActive","active",1,"nav-item"],["href","javascript:void(0)",1,"nav-link"],["aria-hidden","true",1,"fa","fa-cube","menu-icon"],[1,"menu-title"],["routerLink","package","routerLinkActive","active",1,"nav-item"],["aria-hidden","true",1,"fa","fa-product-hunt","menu-icon"],["routerLink","service","routerLinkActive","active",1,"nav-item"],[1,"fa","fa-bullhorn","menu-icon"],["routerLink","calendar","routerLinkActive","active",1,"nav-item"],[1,"fa","fa-calendar-check-o","menu-icon"],["class","nav-item","routerLinkActive","active",3,"routerLink",4,"ngIf"],["routerLink","my-appointment","routerLinkActive","active",1,"nav-item"],[1,"fa","fa-sticky-note","menu-icon"],["routerLink","profile","routerLinkActive","active",1,"nav-item"],[1,"fa","fa-user-circle-o","menu-icon"],["routerLinkActive","active",1,"nav-item",3,"routerLink"],[1,"fa","fa-sticky-note-o","menu-icon"],[1,"fa","fa-telegram","menu-icon"]],template:function(e,t){1&e&&(l.Rb(0,"nav",0),l.Rb(1,"div",1),l.Rb(2,"ul",2),l.Rb(3,"li",3),l.Rb(4,"a",4),l.Nb(5,"i",5),l.Rb(6,"span",6),l.tc(7,"Dashboard"),l.Qb(),l.Qb(),l.Qb(),l.Rb(8,"li",7),l.Rb(9,"a",4),l.Nb(10,"i",8),l.Rb(11,"span",6),l.tc(12,"Package"),l.Qb(),l.Qb(),l.Qb(),l.Rb(13,"li",9),l.Rb(14,"a",4),l.Nb(15,"i",10),l.Rb(16,"span",6),l.tc(17,"Service"),l.Qb(),l.Qb(),l.Qb(),l.Rb(18,"li",11),l.Rb(19,"a",4),l.Nb(20,"i",12),l.Rb(21,"span",6),l.tc(22,"Calendar"),l.Qb(),l.Qb(),l.Qb(),l.rc(23,u,5,1,"li",13),l.rc(24,p,5,1,"li",13),l.Rb(25,"li",14),l.Rb(26,"a",4),l.Nb(27,"i",15),l.Rb(28,"span",6),l.tc(29,"My Appointment"),l.Qb(),l.Qb(),l.Qb(),l.Rb(30,"li",16),l.Rb(31,"a",4),l.Nb(32,"i",17),l.Rb(33,"span",6),l.tc(34,"Profile"),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb()),2&e&&(l.Cb("sidebar sidebar-",t.theme,""),l.zb(1),l.Db("active",t.hideSidebar),l.zb(22),l.ec("ngIf",t.showAvailablity),l.zb(1),l.ec("ngIf",t.showAvailablity))},directives:[a.c,a.d,n.j],styles:[""]}),e})(),m=(()=>{class e{constructor(e,t,i,n){this.router=e,this.bs=t,this.themeChangeService=i,this.userdetailRefreshService=n,this.hideSidebar=!1,this.user=new r.a,this.userDetail=new c.a}ngOnInit(){this.user=this.bs.token(),this.getUserDetail(),this.refreshUserDetail()}getUserDetail(){this.bs.userById(this.user.id).subscribe(e=>{this.userDetail=e},e=>{console.log(e)})}refreshUserDetail(){this.userdetailRefreshService.detailRefresh$.subscribe(e=>{e&&this.getUserDetail()})}logout(){localStorage.removeItem("token"),this.router.navigate(["login"])}toggleSidebar(){this.hideSidebar=!this.hideSidebar}addTheme(e){localStorage.setItem("theme",e),this.themeChangeService.setThemeLoad(e)}}return e.\u0275fac=function(t){return new(t||e)(l.Mb(a.b),l.Mb(o.a),l.Mb(s.a),l.Mb(b.a))},e.\u0275cmp=l.Gb({type:e,selectors:[["app-user"]],decls:116,vars:7,consts:[[1,"container-scroller"],[3,"hideSidebar"],[1,"container-fluid","page-body-wrapper"],[1,"navbar","p-0","d-flex","flex-row"],[1,"navbar-menu-wrapper","d-flex","align-items-center"],["type","button","data-toggle","minimize",1,"navbar-toggler","navbar-toggler","align-self-center",3,"click"],[1,"ti-align-left"],[1,"navbar-brand-wrapper","d-flex","align-items-center","justify-content-center"],["href","index.html",1,"navbar-brand","brand-logo"],["src","assets/images/logo.svg","alt","logo"],["href","index.html",1,"navbar-brand","brand-logo-mini"],["src","assets/images/logo-mini.svg","alt","logo"],[1,"navbar-nav","navbar-nav-right","ml-auto"],[1,"nav-item","nav-search","d-none","d-sm-flex"],[1,"nav-link","d-flex","justify-content-center","align-items-center"],["type","text","id","search-field","placeholder","Search...",1,"form-control","hidden"],["id","search-icon",1,"ti-search","mx-0"],[1,"nav-item","dropdown"],["id","messageDropdown","href","#","data-toggle","dropdown",1,"nav-link","count-indicator","dropdown-toggle","d-flex","justify-content-center","align-items-center"],[1,"ti-comment","mx-0"],[1,"count"],["aria-labelledby","messageDropdown",1,"dropdown-menu","dropdown-menu-right","navbar-dropdown","preview-list"],[1,"mb-0","font-weight-normal","float-left","dropdown-header"],[1,"dropdown-item","preview-item"],[1,"preview-thumbnail"],["src","https://via.placeholder.com/36x36","alt","image",1,"profile-pic"],[1,"preview-item-content","flex-grow"],[1,"preview-subject","ellipsis","font-weight-normal"],[1,"font-weight-light","small-text","text-muted","mb-0"],["id","notificationDropdown","href","#","data-toggle","dropdown",1,"nav-link","count-indicator","dropdown-toggle","d-flex","align-items-center","justify-content-center"],[1,"ti-bell","mx-0"],["aria-labelledby","notificationDropdown",1,"dropdown-menu","dropdown-menu-right","navbar-dropdown","preview-list"],[1,"preview-icon","bg-gradient-success"],[1,"ti-info","mx-0"],[1,"preview-item-content"],[1,"preview-subject","font-weight-normal"],[1,"font-weight-light","small-text","mb-0","text-muted"],[1,"preview-icon","bg-gradient-warning"],[1,"ti-settings","mx-0"],[1,"preview-icon","bg-gradient-info"],[1,"ti-user","mx-0"],[1,"nav-item","nav-profile","dropdown"],["href","#","data-toggle","dropdown","id","profileDropdown",1,"nav-link"],["alt","profile",3,"src"],["aria-labelledby","profileDropdown",1,"dropdown-menu","dropdown-menu-right","navbar-dropdown"],["routerLink","/user/profile",1,"dropdown-item"],[1,"fa","fa-user","text-danger"],[1,"dropdown-item"],["aria-hidden","true",1,"fa","fa-envelope","text-danger"],[1,"dropdown-item",3,"click"],[1,"ti-new-window","text-primary"],[1,"bg-gradient-success","box",3,"click"],[1,"bg-gradient-primary","box",3,"click"],[1,"bg-gradient-info","box",3,"click"],[1,"bg-gradient-warning","box",3,"click"],[1,"bg-gradient-danger","box",3,"click"],["type","button","data-toggle","offcanvas",1,"navbar-toggler","navbar-toggler-right","d-lg-none","align-self-center"],[1,"ti-menu",3,"click"],[1,"main-panel"],[1,"content-wrapper"],[1,"footer"],[1,"d-sm-flex","justify-content-center","justify-content-sm-between"],[1,"text-center","text-sm-left","d-block","d-sm-inline-block"],["href","https://www.urbanui.com/","target","_blank",1,"ml-1"],[1,"float-none","float-sm-right","d-block","mt-1","mt-sm-0","text-center"],[1,"ti-heart","text-danger","ml-1"]],template:function(e,t){1&e&&(l.Rb(0,"div",0),l.Nb(1,"app-sidebar",1),l.Rb(2,"div",2),l.Rb(3,"nav",3),l.Rb(4,"div",4),l.Rb(5,"button",5),l.Zb("click",(function(){return t.toggleSidebar()})),l.Nb(6,"span",6),l.Qb(),l.Rb(7,"div",7),l.Rb(8,"a",8),l.Nb(9,"img",9),l.Qb(),l.Rb(10,"a",10),l.Nb(11,"img",11),l.Qb(),l.Qb(),l.Rb(12,"ul",12),l.Rb(13,"li",13),l.Rb(14,"div",14),l.Nb(15,"input",15),l.Nb(16,"i",16),l.Qb(),l.Qb(),l.Rb(17,"li",17),l.Rb(18,"a",18),l.Nb(19,"i",19),l.Nb(20,"span",20),l.Qb(),l.Rb(21,"div",21),l.Rb(22,"p",22),l.tc(23,"Messages"),l.Qb(),l.Rb(24,"a",23),l.Rb(25,"div",24),l.Nb(26,"img",25),l.Qb(),l.Rb(27,"div",26),l.Rb(28,"h6",27),l.tc(29,"David Grey "),l.Qb(),l.Rb(30,"p",28),l.tc(31," The meeting is cancelled "),l.Qb(),l.Qb(),l.Qb(),l.Rb(32,"a",23),l.Rb(33,"div",24),l.Nb(34,"img",25),l.Qb(),l.Rb(35,"div",26),l.Rb(36,"h6",27),l.tc(37,"Tim Cook "),l.Qb(),l.Rb(38,"p",28),l.tc(39," New product launch "),l.Qb(),l.Qb(),l.Qb(),l.Rb(40,"a",23),l.Rb(41,"div",24),l.Nb(42,"img",25),l.Qb(),l.Rb(43,"div",26),l.Rb(44,"h6",27),l.tc(45," Johnson "),l.Qb(),l.Rb(46,"p",28),l.tc(47," Upcoming board meeting "),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(48,"li",17),l.Rb(49,"a",29),l.Nb(50,"i",30),l.Nb(51,"span",20),l.Qb(),l.Rb(52,"div",31),l.Rb(53,"p",22),l.tc(54,"Notifications"),l.Qb(),l.Rb(55,"a",23),l.Rb(56,"div",24),l.Rb(57,"div",32),l.Nb(58,"i",33),l.Qb(),l.Qb(),l.Rb(59,"div",34),l.Rb(60,"h6",35),l.tc(61,"Application Error"),l.Qb(),l.Rb(62,"p",36),l.tc(63," Just now "),l.Qb(),l.Qb(),l.Qb(),l.Rb(64,"a",23),l.Rb(65,"div",24),l.Rb(66,"div",37),l.Nb(67,"i",38),l.Qb(),l.Qb(),l.Rb(68,"div",34),l.Rb(69,"h6",35),l.tc(70,"Settings"),l.Qb(),l.Rb(71,"p",36),l.tc(72," Private message "),l.Qb(),l.Qb(),l.Qb(),l.Rb(73,"a",23),l.Rb(74,"div",24),l.Rb(75,"div",39),l.Nb(76,"i",40),l.Qb(),l.Qb(),l.Rb(77,"div",34),l.Rb(78,"h6",35),l.tc(79,"New user registration"),l.Qb(),l.Rb(80,"p",36),l.tc(81," 2 days ago "),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(82,"li",41),l.Rb(83,"a",42),l.Nb(84,"img",43),l.Qb(),l.Rb(85,"div",44),l.Rb(86,"a",45),l.Nb(87,"i",46),l.tc(88),l.Qb(),l.Rb(89,"a",47),l.Nb(90,"i",48),l.tc(91),l.Qb(),l.Rb(92,"a",49),l.Zb("click",(function(){return t.logout()})),l.Nb(93,"i",50),l.tc(94," Logout "),l.Qb(),l.Rb(95,"a",47),l.Rb(96,"div",51),l.Zb("click",(function(){return t.addTheme("success")})),l.Qb(),l.Rb(97,"div",52),l.Zb("click",(function(){return t.addTheme("primary")})),l.Qb(),l.Rb(98,"div",53),l.Zb("click",(function(){return t.addTheme("info")})),l.Qb(),l.Rb(99,"div",54),l.Zb("click",(function(){return t.addTheme("warning")})),l.Qb(),l.Rb(100,"div",55),l.Zb("click",(function(){return t.addTheme("danger")})),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(101,"button",56),l.Rb(102,"span",57),l.Zb("click",(function(){return t.toggleSidebar()})),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(103,"div",58),l.Rb(104,"div",59),l.Nb(105,"router-outlet"),l.Qb(),l.Rb(106,"footer",60),l.Rb(107,"div",61),l.Rb(108,"span",62),l.tc(109,"Copyright \xa9 2019"),l.Rb(110,"a",63),l.tc(111,"Urbanui"),l.Qb(),l.tc(112,". All rights reserved."),l.Qb(),l.Rb(113,"span",64),l.tc(114,"Designed by: UrbanUI"),l.Nb(115,"i",65),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb()),2&e&&(l.Db("sidebar-icon-only",t.hideSidebar),l.zb(1),l.ec("hideSidebar",t.hideSidebar),l.zb(83),l.ec("src",t.userDetail.image,l.nc),l.zb(4),l.wc(" ",t.userDetail.firstName," ",t.userDetail.lastName," "),l.zb(3),l.vc(" ",t.userDetail.email," "))},directives:[h,a.e,a.g],styles:["app-sidebar[_ngcontent-%COMP%]{z-index:100}.box[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;margin:1px}"]}),e})(),f=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Gb({type:e,selectors:[["app-dashboard"]],decls:2,vars:0,consts:[[2,"color","white"]],template:function(e,t){1&e&&(l.Rb(0,"h2",0),l.tc(1,"dashboard works!"),l.Qb())},styles:[""]}),e})();var g=i("QNcV");let v=(()=>{class e{constructor(e,t){this.as=e,this.router=t,this.role=this.as.logedIn(),this.as.chkAuthariseUser({})}canActivate(){return"user"==this.role||(localStorage.removeItem("token"),this.router.navigate(["/login"]),!1)}canActivateChild(){return"user"==this.role||(localStorage.removeItem("token"),this.router.navigate(["/login"]),!1)}}return e.\u0275fac=function(t){return new(t||e)(l.Vb(g.a),l.Vb(a.b))},e.\u0275prov=l.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var R=i("PSD3"),Q=i.n(R),y=i("wd/R"),w=i("WA2H"),k=i("9Egf"),S=i("3Pt+");const x=["close"];function M(e,t){if(1&e){const e=l.Sb();l.Rb(0,"button",63),l.Zb("click",(function(){l.lc(e);const t=l.bc().$implicit;return l.bc().startBooking(t._id)})),l.Nb(1,"i",61),l.tc(2," Start Booking"),l.Qb()}}function C(e,t){if(1&e){const e=l.Sb();l.Rb(0,"div",2),l.Rb(1,"div",3),l.Rb(2,"div",4),l.Rb(3,"div",5),l.Rb(4,"div",45),l.Nb(5,"br"),l.Rb(6,"h4",46),l.Nb(7,"i",14),l.tc(8),l.Qb(),l.Rb(9,"p",47),l.tc(10),l.Rb(11,"span",48),l.Rb(12,"span",49),l.tc(13,"Max"),l.Qb(),l.tc(14," \xa0"),l.Nb(15,"i",50),l.tc(16),l.Qb(),l.Qb(),l.Rb(17,"p",51),l.tc(18),l.Qb(),l.Rb(19,"p",52),l.tc(20),l.Rb(21,"span",48),l.Rb(22,"span",49),l.tc(23,"@"),l.Qb(),l.tc(24," \xa0"),l.Nb(25,"i",34),l.tc(26),l.Qb(),l.Qb(),l.Rb(27,"p",53),l.Rb(28,"button",54),l.Zb("click",(function(){l.lc(e);const i=t.$implicit;return l.bc().edit(i)})),l.Nb(29,"i",55),l.tc(30," Edit"),l.Qb(),l.tc(31," \xa0 "),l.Rb(32,"button",56),l.Zb("click",(function(){l.lc(e);const i=t.$implicit;return l.bc().delete(i._id)})),l.Nb(33,"i",57),l.tc(34," Delete"),l.Qb(),l.tc(35," \xa0 "),l.Rb(36,"button",58),l.Zb("click",(function(){l.lc(e);const i=t.$implicit;return l.bc().duplicate(i)})),l.Nb(37,"i",59),l.tc(38," Duplicate"),l.Qb(),l.tc(39,"\xa0 "),l.Rb(40,"button",60),l.Zb("click",(function(){l.lc(e);const i=t.$implicit;return l.bc().avilablity(i._id)})),l.Nb(41,"i",61),l.tc(42," Avilablity"),l.Qb(),l.tc(43,"\xa0 "),l.rc(44,M,3,0,"button",62),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb()}if(2&e){const e=t.$implicit;l.zb(8),l.vc("\xa0\xa0 ",null==e?null:e.name,""),l.zb(2),l.vc("Duration : ",e.duration," Minute "),l.zb(6),l.vc(" ",e.maxAllowed,""),l.zb(2),l.vc("Resting Period : ",e.rest," Minute after each service "),l.zb(2),l.vc("Total Period : ",e.rest+e.duration," Minute "),l.zb(6),l.vc(" ",e.price,""),l.zb(18),l.ec("ngIf",!e.started)}}function D(e,t){1&e&&(l.Rb(0,"span",64),l.tc(1,"This field is required"),l.Qb())}function O(e,t){if(1&e&&(l.Rb(0,"div",20),l.Rb(1,"label",21),l.tc(2,"Duration"),l.Qb(),l.Rb(3,"div",22),l.Rb(4,"div",31),l.Rb(5,"label",65),l.tc(6),l.Qb(),l.Rb(7,"div",32),l.Rb(8,"span",33),l.tc(9,"Minuite"),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb()),2&e){const e=l.bc();l.zb(6),l.uc(e.service.duration)}}function I(e,t){1&e&&(l.Rb(0,"span",64),l.tc(1,"This field is required"),l.Qb())}function z(e,t){1&e&&(l.Rb(0,"span",64),l.tc(1,"Total (Duration + Resting Period) can not be Greater Than 1440 minute (1 day ) "),l.Qb())}function N(e,t){1&e&&(l.Rb(0,"span",64),l.tc(1,"Negative Value is not alloewd "),l.Qb())}function P(e,t){if(1&e){const e=l.Sb();l.Rb(0,"div",20),l.Rb(1,"label",21),l.tc(2,"Duration"),l.Qb(),l.Rb(3,"div",22),l.Rb(4,"div",31),l.Rb(5,"input",66,67),l.Zb("change",(function(){l.lc(e);const t=l.ic(6),i=l.bc();return i.validateDuration(t.value,i.rest.value)})),l.Qb(),l.Rb(7,"div",32),l.Rb(8,"span",33),l.tc(9,"Minuite"),l.Qb(),l.Qb(),l.Qb(),l.rc(10,I,2,0,"span",25),l.rc(11,z,2,0,"span",25),l.rc(12,N,2,0,"span",25),l.Qb(),l.Qb()}if(2&e){const e=l.ic(6),t=l.bc();l.zb(5),l.ec("ngModel",t.service.duration),l.zb(5),l.ec("ngIf",(null==e?null:e.touched)&&(null==e||null==e.errors?null:e.errors.required)),l.zb(1),l.ec("ngIf",(null==e?null:e.touched)&&t.maDurationErr&&!(null!=e&&null!=e.errors&&e.errors.required)&&e.value>0),l.zb(1),l.ec("ngIf",(null==e?null:e.touched)&&e.value<0)}}function A(e,t){if(1&e&&(l.Rb(0,"div",20),l.Rb(1,"label",21),l.tc(2,"Resting Period"),l.Qb(),l.Rb(3,"div",22),l.Rb(4,"div",31),l.Rb(5,"label",65),l.tc(6),l.Qb(),l.Rb(7,"div",32),l.Rb(8,"span",33),l.tc(9,"Minuite"),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb()),2&e){const e=l.bc();l.zb(6),l.uc(e.service.rest)}}function _(e,t){1&e&&(l.Rb(0,"span",64),l.tc(1,"This field is required "),l.Qb())}function T(e,t){1&e&&(l.Rb(0,"span",64),l.tc(1,"Negative Value is not alloewd "),l.Qb())}function E(e,t){if(1&e){const e=l.Sb();l.Rb(0,"div",20),l.Rb(1,"label",21),l.tc(2,"Resting Period"),l.Qb(),l.Rb(3,"div",22),l.Rb(4,"div",31),l.Rb(5,"input",68,69),l.Zb("change",(function(){l.lc(e);const t=l.ic(6),i=l.bc();return i.validateDuration(i.duration.value,t.value)})),l.Qb(),l.Rb(7,"div",32),l.Rb(8,"span",33),l.tc(9,"Minuite"),l.Qb(),l.Qb(),l.Qb(),l.rc(10,_,2,0,"span",25),l.rc(11,T,2,0,"span",25),l.Qb(),l.Qb()}if(2&e){const e=l.ic(6),t=l.bc();l.zb(5),l.ec("ngModel",t.service.rest),l.zb(5),l.ec("ngIf",(null==e?null:e.touched)&&(null==e||null==e.errors?null:e.errors.required)),l.zb(1),l.ec("ngIf",(null==e?null:e.touched)&&e.value<0)}}function F(e,t){1&e&&(l.Rb(0,"span",64),l.tc(1,"This field is required "),l.Qb())}function U(e,t){1&e&&(l.Rb(0,"span",64),l.tc(1," Before Date are not allow"),l.Qb())}function L(e,t){1&e&&(l.Rb(0,"span",64),l.tc(1," End Date must be greater than start Date"),l.Qb())}function q(e,t){1&e&&(l.Rb(0,"span",64),l.tc(1,"This field is required "),l.Qb())}function Z(e,t){1&e&&(l.Rb(0,"span",64),l.tc(1,"This field is required "),l.Qb())}function B(e,t){1&e&&(l.Rb(0,"span",64),l.tc(1,"At least one person is must "),l.Qb())}function G(e,t){1&e&&(l.Rb(0,"span",64),l.tc(1,"This field is required "),l.Qb())}function Y(e,t){1&e&&(l.Rb(0,"span",64),l.tc(1,"At least 30 day is must must be allow in advance "),l.Qb())}let $=(()=>{class e{constructor(e,t,i,n,a){this.router=e,this.bs=t,this.os=i,this.themeChangeService=n,this.avaliabiltyReloadService=a,this.maxPersonErr=!1,this.maDurationErr=!1,this.maxAdvanceBookingDayErr=!1,this.closeModel=!1,this.today=y().format("YYYY-MM-DD"),this.service=new w.a}ngOnInit(){this.userId=this.bs.token().id,this.allServiceOfUser(),this.theme=localStorage.getItem("theme"),this.themeChange(),this.activePackageHistory()}activePackageHistory(){console.log(this.userId),this.bs.activePackageHistory({id:this.userId}).subscribe(e=>{this.maxAllowedService=e.packageId.noOfService},e=>{console.log(e)})}themeChange(){this.themeChangeService.themeLoad$.subscribe(e=>this.theme=e)}allServiceOfUser(){this.bs.allServiceOfUser({userId:this.userId}).subscribe(e=>{this.allService=e,this.noOfService=e.length},e=>{console.log(e)})}addService(){if(this.noOfService<this.maxAllowedService){let e=new w.a;e.duration=50,e.rest=10,e.price=100,e.name="New Service",e.userId=this.userId,e.maxAllowed=1,e.startDate=this.today,e.maxAdvanceBookingDay=30,this.bs.addService(e).subscribe(e=>{this.allServiceOfUser(),this.AvaliabiltyReload(),this.os.swall("success",e.message)},e=>{console.log(e)})}else this.os.swall("error","You have used all Your Service. Please upgrade your plan to create more Service ")}updateService(e){e.value.userId=this.service.userId,e.value._id=this.service._id,this.bs.updateService(e.value).subscribe(e=>{this.allServiceOfUser(),this.os.swall("success",e.message),this.closebtn.nativeElement.click()},e=>{console.log(e)})}edit(e){delete this.service,this.service=e}delete(e){Q.a.fire({title:"Are you sure?",text:"You will not be able to recover this imaginary file!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it",customClass:{popup:"swal-popup-class del-popup-size",header:"header-class",title:"title-class",image:"image-class",actions:"actions-class",confirmButton:"confirm-button-class",cancelButton:"cancel-button-class"}}).then(t=>{t.value&&this.bs.deleteService({id:e}).subscribe(e=>{this.allServiceOfUser(),this.os.swall(e.type,e.message)},e=>{console.log(e)})})}avilablity(e){this.router.navigate(["/user/avilablity/"+e])}duplicate(e){this.noOfService<this.maxAllowedService?(delete e._id,e.started=!1,this.bs.dupService(e).subscribe(e=>{this.allServiceOfUser(),this.os.swall("success",e.message)},e=>{console.log(e)})):this.os.swall("error","You have used all Your Service. Please upgrade your plan to duplicate more Service ")}validateMaxPerson(e){this.maxPersonErr=e<=0}validatemaxAdvanceBookingDay(e){this.maxAdvanceBookingDayErr=e<30}validateDuration(e,t){var i=e+t;console.log(i),this.maDurationErr=i>1440||t<0||e<0}validateStartDate(e){let t=new Date(this.today),i=new Date(e);this.invalidStartDate=i.getTime()<t.getTime()}validateEndDate(e,t){let i=new Date(t),n=new Date(e);this.invalidEndDate=n.getTime()>i.getTime()}AvaliabiltyReload(){this.avaliabiltyReloadService.sendReload(!0)}startBooking(e){this.bs.updateService({_id:e,started:!0}).subscribe(e=>{this.allServiceOfUser(),this.os.swall("success","Booking For this Service has been started")},e=>{console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(l.Mb(a.b),l.Mb(o.a),l.Mb(k.a),l.Mb(s.a),l.Mb(d.a))},e.\u0275cmp=l.Gb({type:e,selectors:[["app-service"]],viewQuery:function(e,t){var i;1&e&&l.pc(x,!0),2&e&&l.hc(i=l.ac())&&(t.closebtn=i.first)},decls:89,vars:28,consts:[[1,"row"],["class","col-md-4 grid-margin stretch-card",4,"ngFor","ngForOf"],[1,"col-md-4","grid-margin","stretch-card"],[1,"card"],[1,"card-body"],[1,"d-sm-flex","flex-row","flex-wrap","text-center","text-sm-left","align-items-center"],[3,"click"],[1,"fa","fa-plus-circle"],["id","myModel","tabindex","-1","role","dialog","aria-labelledby","ModalLabel","aria-hidden","true",1,"modal","fade"],["model",""],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","ModalLabel",1,"modal-title"],[1,"fa","fa","fa-superpowers"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"forms-sample",3,"ngSubmit"],["tempForm","ngForm"],[1,"modal-body"],[1,"form-group","row"],["for","exampleInputUsername2",1,"col-sm-6","col-form-label"],[1,"col-sm-6"],["name","name","type","text","required","",1,"form-control",3,"ngModel"],["name","ngModel"],["class","code-help",4,"ngIf"],["class","form-group row",4,"ngIf"],["min","minDate","name","startDate","type","date","required","",1,"form-control",3,"ngModel","change"],["startDate","ngModel"],["min","minDate","name","endDate","type","date",1,"form-control",3,"ngModel","change"],["endDate","ngModel"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-inr"],["name","price","type","number","required","",1,"form-control",3,"ngModel"],["price","ngModel"],["name","maxAllowed","type","number","required","",1,"form-control",3,"ngModel","change"],["maxAllowed","ngModel"],["name","maxAdvanceBookingDay","type","number","required","",1,"form-control",3,"ngModel","change"],["maxAdvanceBookingDay","ngModel"],[1,"modal-footer"],["type","submit",3,"disabled"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary","btn-fw"],["close",""],[1,"ml-sm-3","ml-md-0","ml-xl-3","mt-2","mt-sm-0","mt-md-2","mt-xl-0"],[1,"mb-1"],[1,"mb-1","text-warning"],[1,"text-success","font-weight-bold","right"],[1,"text-danger"],[1,"fa","fa-users"],[1,"text-muted","mb-1"],[1,"text-info","mb-1"],[1,"border-top","pt-3","text-justify"],["data-toggle","modal","data-target","#myModel","type","button",1,"btn","btn-outline-info","btn-fw","mt-1",3,"click"],[1,"fa","fa-pencil-square-o"],["type","button",1,"btn","btn-outline-danger","btn-fw","mt-1",3,"click"],[1,"fa","fa-trash-o"],["type","button",1,"btn","btn-outline-primary","btn-fw","mt-1",3,"click"],[1,"fa","fa-copy"],["type","button",1,"btn","btn-outline-warning","btn-fw","mt-1",3,"click"],[1,"fa","fa-clipboard"],["type","button","class","btn btn-outline-info btn-fw mt-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-info","btn-fw","mt-1",3,"click"],[1,"code-help"],[1,"form-control"],["name","duration","type","number","required","",1,"form-control",3,"ngModel","change"],["duration","ngModel"],["name","rest","type","number","required","",1,"form-control",3,"ngModel","change"],["rest","ngModel"]],template:function(e,t){if(1&e){const e=l.Sb();l.Rb(0,"div",0),l.rc(1,C,45,7,"div",1),l.Rb(2,"div",2),l.Rb(3,"div",3),l.Rb(4,"div",4),l.Rb(5,"div",5),l.Rb(6,"h1",6),l.Zb("click",(function(){return t.addService()})),l.Nb(7,"i",7),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(8,"div",8,9),l.Rb(10,"div",10),l.Rb(11,"div",11),l.Rb(12,"div",12),l.Rb(13,"h5",13),l.Nb(14,"i",14),l.tc(15),l.Qb(),l.Rb(16,"button",15),l.Rb(17,"span",16),l.tc(18,"\xd7"),l.Qb(),l.Qb(),l.Qb(),l.Rb(19,"form",17,18),l.Zb("ngSubmit",(function(){l.lc(e);const i=l.ic(20);return t.updateService(i)})),l.Rb(21,"div",19),l.Rb(22,"div",20),l.Rb(23,"label",21),l.tc(24,"Service Name"),l.Qb(),l.Rb(25,"div",22),l.Nb(26,"input",23,24),l.rc(28,D,2,0,"span",25),l.Qb(),l.Qb(),l.rc(29,O,10,1,"div",26),l.rc(30,P,13,4,"div",26),l.rc(31,A,10,1,"div",26),l.rc(32,E,12,3,"div",26),l.Rb(33,"div",20),l.Rb(34,"label",21),l.tc(35,"Start Date"),l.Qb(),l.Rb(36,"div",22),l.Rb(37,"input",27,28),l.Zb("change",(function(){l.lc(e);const i=l.ic(38);return t.validateStartDate(i.value)})),l.Qb(),l.rc(39,F,2,0,"span",25),l.rc(40,U,2,0,"span",25),l.Qb(),l.Qb(),l.Rb(41,"div",20),l.Rb(42,"label",21),l.tc(43,"End Date"),l.Qb(),l.Rb(44,"div",22),l.Rb(45,"input",29,30),l.Zb("change",(function(){l.lc(e);const i=l.ic(38),n=l.ic(46);return t.validateEndDate(i.value,n.value)})),l.Qb(),l.rc(47,L,2,0,"span",25),l.Qb(),l.Qb(),l.Rb(48,"div",20),l.Rb(49,"label",21),l.tc(50,"Price"),l.Qb(),l.Rb(51,"div",22),l.Rb(52,"div",31),l.Rb(53,"div",32),l.Rb(54,"span",33),l.Nb(55,"i",34),l.Qb(),l.Qb(),l.Nb(56,"input",35,36),l.Qb(),l.rc(58,q,2,0,"span",25),l.Qb(),l.Qb(),l.Rb(59,"div",20),l.Rb(60,"label",21),l.tc(61,"Max Allowed "),l.Qb(),l.Rb(62,"div",22),l.Rb(63,"div",31),l.Rb(64,"input",37,38),l.Zb("change",(function(){l.lc(e);const i=l.ic(65);return t.validateMaxPerson(i.value)})),l.Qb(),l.Rb(66,"div",32),l.Rb(67,"span",33),l.tc(68,"Person"),l.Qb(),l.Qb(),l.Qb(),l.rc(69,Z,2,0,"span",25),l.rc(70,B,2,0,"span",25),l.Qb(),l.Qb(),l.Rb(71,"div",20),l.Rb(72,"label",21),l.tc(73,"Advance Day allow "),l.Qb(),l.Rb(74,"div",22),l.Rb(75,"div",31),l.Rb(76,"input",39,40),l.Zb("change",(function(){l.lc(e);const i=l.ic(77);return t.validatemaxAdvanceBookingDay(i.value)})),l.Qb(),l.Rb(78,"div",32),l.Rb(79,"span",33),l.tc(80,"day"),l.Qb(),l.Qb(),l.Qb(),l.rc(81,G,2,0,"span",25),l.rc(82,Y,2,0,"span",25),l.Qb(),l.Qb(),l.Qb(),l.Rb(83,"div",41),l.Rb(84,"button",42),l.tc(85,"Update"),l.Qb(),l.Rb(86,"button",43,44),l.tc(88,"Close"),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb()}if(2&e){const e=l.ic(20),i=l.ic(27),n=l.ic(38),a=l.ic(46),r=l.ic(57),c=l.ic(65),o=l.ic(77);l.zb(1),l.ec("ngForOf",t.allService),l.zb(5),l.Cb("text-center text-",t.theme,""),l.zb(9),l.vc(" \xa0\xa0 ",i.value," "),l.zb(11),l.ec("ngModel",t.service.name),l.zb(2),l.ec("ngIf",(null==i?null:i.touched)&&(null==i||null==i.errors?null:i.errors.required)),l.zb(1),l.ec("ngIf",t.service.started),l.zb(1),l.ec("ngIf",!t.service.started),l.zb(1),l.ec("ngIf",t.service.started),l.zb(1),l.ec("ngIf",!t.service.started),l.zb(5),l.ec("ngModel",t.service.startDate),l.zb(2),l.ec("ngIf",(null==n?null:n.touched)&&(null==n||null==n.errors?null:n.errors.required)),l.zb(1),l.ec("ngIf",(null==n?null:n.touched)&&t.invalidStartDate),l.zb(5),l.ec("ngModel",t.service.endDate),l.zb(2),l.ec("ngIf",(null==a?null:a.touched)&&t.invalidEndDate),l.zb(9),l.ec("ngModel",t.service.price),l.zb(2),l.ec("ngIf",(null==r?null:r.touched)&&(null==r||null==r.errors?null:r.errors.required)),l.zb(6),l.ec("ngModel",t.service.maxAllowed),l.zb(5),l.ec("ngIf",(null==c?null:c.touched)&&(null==c||null==c.errors?null:c.errors.required)),l.zb(1),l.ec("ngIf",(null==c?null:c.touched)&&t.maxPersonErr&&!(null!=c&&null!=c.errors&&c.errors.required)),l.zb(6),l.ec("ngModel",t.service.maxAdvanceBookingDay),l.zb(5),l.ec("ngIf",(null==o?null:o.touched)&&(null==o||null==o.errors?null:o.errors.required)),l.zb(1),l.ec("ngIf",(null==o?null:o.touched)&&t.maxAdvanceBookingDayErr&&!(null!=o&&null!=o.errors&&o.errors.required)),l.zb(2),l.Cb("btn btn-outline-",t.theme," btn-fw"),l.ec("disabled",!e.valid||t.maxPersonErr||t.maDurationErr||t.invalidEndDate||t.invalidStartDate||t.maxAdvanceBookingDayErr)}},directives:[n.i,S.u,S.i,S.j,S.b,S.q,S.h,S.k,n.j,S.n],styles:[".right[_ngcontent-%COMP%]{float:right}.swal2-styled.swal2-confirm[_ngcontent-%COMP%]{background-color:#389466!important}i.fa.fa-plus-circle[_ngcontent-%COMP%]{font-size:176px;cursor:pointer}.text-center[_ngcontent-%COMP%]{text-align:center;width:100%}.ml[_ngcontent-%COMP%]{margin-left:8px}"]}),e})();var j=i("k8dl");const H=["close"];function V(e,t){if(1&e&&(l.Rb(0,"div"),l.Rb(1,"p",38),l.tc(2),l.Qb(),l.Qb()),2&e){const e=t.$implicit;l.zb(2),l.vc("",e.name," ")}}function W(e,t){if(1&e){const e=l.Sb();l.Rb(0,"div",2),l.Rb(1,"div",3),l.Rb(2,"div",4),l.Rb(3,"div",33),l.Rb(4,"div",34),l.Rb(5,"h4",35),l.Nb(6,"i",13),l.tc(7),l.Qb(),l.Rb(8,"div",36),l.Rb(9,"p",37),l.tc(10,"Description"),l.Qb(),l.Rb(11,"p",38),l.tc(12),l.Qb(),l.Rb(13,"p",39),l.tc(14,"Service"),l.Qb(),l.rc(15,V,3,1,"div",40),l.Qb(),l.Rb(16,"p",41),l.Rb(17,"button",42),l.Zb("click",(function(){l.lc(e);const i=t.$implicit;return l.bc().edit(i)})),l.Nb(18,"i",43),l.tc(19," Edit"),l.Qb(),l.tc(20," \xa0 "),l.Rb(21,"button",44),l.Zb("click",(function(){l.lc(e);const i=t.$implicit;return l.bc().delete(i._id)})),l.Nb(22,"i",45),l.tc(23," Delete"),l.Qb(),l.tc(24," \xa0 "),l.Rb(25,"button",46),l.Zb("click",(function(){l.lc(e);const i=t.$implicit;return l.bc().duplicate(i)})),l.Nb(26,"i",47),l.tc(27," Duplicate"),l.Qb(),l.Rb(28,"button",48),l.Zb("click",(function(){l.lc(e);const i=t.$implicit;return l.bc().copyText("http://localhost:4200/calendar/"+i._id)})),l.Nb(29,"i",47),l.tc(30," Copy Link"),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb()}if(2&e){const e=t.$implicit;l.zb(7),l.vc("\xa0\xa0 ",e.name,""),l.zb(5),l.vc(" ",e.description,""),l.zb(3),l.ec("ngForOf",e.service)}}function J(e,t){1&e&&(l.Rb(0,"span",49),l.tc(1,"This field is required"),l.Qb())}function K(e,t){if(1&e&&(l.Rb(0,"div",19),l.Rb(1,"div",21),l.Rb(2,"div"),l.Rb(3,"label",50),l.Nb(4,"input",51),l.tc(5),l.Nb(6,"i",52),l.Qb(),l.Qb(),l.Qb(),l.Qb()),2&e){const e=t.$implicit,i=l.bc();l.zb(2),l.Cb("form-check form-check-",i.theme,""),l.zb(2),l.fc("name",e._id),l.ec("ngModel",i.serviceModel(i.calendar.service,e._id)),l.zb(1),l.vc(" ",e.name," ")}}let X=(()=>{class e{constructor(e,t,i,n){this.bs=e,this.router=t,this.os=i,this.themeChangeService=n,this.calendar=new j.a}ngOnInit(){this.theme=localStorage.getItem("theme"),this.userId=this.bs.token().id,this.allCalendarOfUser(),this.allServiceOfUser(),this.themeChange(),this.activePackageHistory()}activePackageHistory(){this.bs.activePackageHistory({id:this.userId}).subscribe(e=>{this.maxAllowedCalander=e.packageId.noOfCalendar},e=>{console.log(e)})}allCalendarOfUser(){this.bs.allCalendarOfUser({userId:this.userId}).subscribe(e=>{this.allCalendar=e,this.noOfCalander=e.length},e=>{console.log(e)})}themeChange(){this.themeChangeService.themeLoad$.subscribe(e=>this.theme=e)}edit(e){delete this.calendar,this.calendar=e}updateCalendar(e){e.value.userId=this.calendar.userId,e.value._id=this.calendar._id;var t=[],i=0;for(var n in e.value.service)!0===e.value.service[n]&&(t[i++]=n);e.value.service=t,this.bs.updateCalendar(e.value).subscribe(e=>{this.allCalendarOfUser(),this.os.swall("success",e.message),this.closebtn.nativeElement.click()},e=>{console.log(e)})}allServiceOfUser(){this.bs.allServiceOfUser({userId:this.userId}).subscribe(e=>{this.allService=e},e=>{console.log(e)})}addCalendar(){if(console.log(this.noOfCalander),console.log(this.maxAllowedCalander),this.noOfCalander<this.maxAllowedCalander){var e=new j.a;e.name="New Calendar",e.userId=this.userId,e.description="New Calendar description",this.bs.addCalendar(e).subscribe(e=>{this.allCalendarOfUser(),this.os.swall("success",e.message)},e=>{console.log(e)})}else this.os.swall("error","You have used all Your Calander. Please upgrade your plan to create more Calander ")}delete(e){Q.a.fire({title:"Are you sure?",text:"You will not be able to recover this imaginary file!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it",customClass:{popup:"swal-popup-class del-popup-size",header:"header-class",title:"title-class",image:"image-class",actions:"actions-class",confirmButton:"confirm-button-class",cancelButton:"cancel-button-class"}}).then(t=>{t.value&&this.bs.deleteCalendar({id:e}).subscribe(e=>{this.allCalendarOfUser(),this.os.swall(e.type,e.message)},e=>{console.log(e)})})}duplicate(e){this.noOfCalander<this.maxAllowedCalander?(delete e._id,this.bs.dupCalendar(e).subscribe(e=>{this.allCalendarOfUser(),this.os.swall("success",e.message)},e=>{console.log(e)})):this.os.swall("error","You have used all Your Calander. Please upgrade your plan to create more Calander ")}serviceModel(e,t){for(let i in e)if(e[i]._id==t)return!0}copyText(e){let t=document.createElement("textarea");t.style.position="fixed",t.style.left="0",t.style.top="0",t.style.opacity="0",t.value=e,document.body.appendChild(t),t.focus(),t.select(),document.execCommand("copy"),document.body.removeChild(t),this.os.swall("success","Link copied")}}return e.\u0275fac=function(t){return new(t||e)(l.Mb(o.a),l.Mb(a.b),l.Mb(k.a),l.Mb(s.a))},e.\u0275cmp=l.Gb({type:e,selectors:[["app-calander"]],viewQuery:function(e,t){var i;1&e&&l.pc(H,!0),2&e&&l.hc(i=l.ac())&&(t.closebtn=i.first)},decls:43,vars:14,consts:[[1,"row"],["class","col-md-4 grid-margin stretch-card",4,"ngFor","ngForOf"],[1,"col-md-4","grid-margin","stretch-card"],[1,"card"],[1,"card-body"],[1,"d-sm-flex","flex-row","flex-wrap","text-center","text-sm-left","align-items-center"],[3,"click"],[1,"fa","fa-plus-circle"],["id","exampleModal-4","tabindex","-1","role","dialog","aria-labelledby","ModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","ModalLabel",1,"modal-title"],[1,"fa","fa","fa-superpowers"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"forms-sample",3,"ngSubmit"],["tempForm","ngForm"],[1,"modal-body"],[1,"form-group","row"],["for","exampleInputUsername2",1,"col-12","col-form-label"],[1,"col-12"],["name","name","type","text","required","",1,"form-control",3,"ngModel"],["name","ngModel"],["class","code-help",4,"ngIf"],["rows","5","name","description",1,"form-control",3,"ngModel"],["desc","ngModel"],["ngModelGroup","service"],["class","form-group row",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","submit",3,"disabled"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary","btn-fw"],["close",""],[1,"d-sm-flex","flex-row","flex-wrap","text-sm-left","align-items-center"],[1,"ml-sm-3","ml-md-0","ml-xl-3","mt-2","mt-sm-0","mt-md-2","mt-xl-0"],[1,"mb-1"],[1,"desc"],[1,"mb-1","text-warning"],[1,"mb-1","detail"],[1,"mb-1","text-danger","border-top"],[4,"ngFor","ngForOf"],[1,"border-top","pt-3","text-justify"],["data-toggle","modal","data-target","#exampleModal-4","type","button",1,"btn","btn-outline-info","btn-fw","btn-sm",3,"click"],[1,"fa","fa-pencil-square-o"],["type","button",1,"btn","btn-outline-danger","btn-fw",3,"click"],[1,"fa","fa-trash-o"],["type","button",1,"btn","btn-outline-warning","btn-fw",3,"click"],[1,"fa","fa-copy"],["type","button",1,"btn","btn-outline-secondary","btn-fw",3,"click"],[1,"code-help"],[1,"form-check-label"],["type","checkbox",3,"ngModel","name"],[1,"input-helper"]],template:function(e,t){if(1&e){const e=l.Sb();l.Rb(0,"div",0),l.rc(1,W,31,3,"div",1),l.Rb(2,"div",2),l.Rb(3,"div",3),l.Rb(4,"div",4),l.Rb(5,"div",5),l.Rb(6,"h1",6),l.Zb("click",(function(){return t.addCalendar()})),l.Nb(7,"i",7),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(8,"div",8),l.Rb(9,"div",9),l.Rb(10,"div",10),l.Rb(11,"div",11),l.Rb(12,"h5",12),l.Nb(13,"i",13),l.tc(14),l.Qb(),l.Rb(15,"button",14),l.Rb(16,"span",15),l.tc(17,"\xd7"),l.Qb(),l.Qb(),l.Qb(),l.Rb(18,"form",16,17),l.Zb("ngSubmit",(function(){l.lc(e);const i=l.ic(19);return t.updateCalendar(i)})),l.Rb(20,"div",18),l.Rb(21,"div",19),l.Rb(22,"label",20),l.tc(23,"Service Name"),l.Qb(),l.Rb(24,"div",21),l.Nb(25,"input",22,23),l.rc(27,J,2,0,"span",24),l.Qb(),l.Qb(),l.Rb(28,"div",19),l.Rb(29,"label",20),l.tc(30,"Description"),l.Qb(),l.Rb(31,"div",21),l.Rb(32,"textarea",25,26),l.tc(34),l.Qb(),l.Qb(),l.Qb(),l.Rb(35,"div",27),l.rc(36,K,7,6,"div",28),l.Qb(),l.Qb(),l.Rb(37,"div",29),l.Rb(38,"button",30),l.tc(39,"Update"),l.Qb(),l.Rb(40,"button",31,32),l.tc(42,"Close"),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb()}if(2&e){const e=l.ic(19),i=l.ic(26);l.zb(1),l.ec("ngForOf",t.allCalendar),l.zb(5),l.Cb("text-center text-",t.theme,""),l.zb(8),l.vc(" \xa0\xa0 ",i.value,""),l.zb(11),l.ec("ngModel",t.calendar.name),l.zb(2),l.ec("ngIf",(null==i?null:i.touched)&&(null==i||null==i.errors?null:i.errors.required)),l.zb(5),l.ec("ngModel",t.calendar.description),l.zb(2),l.uc(t.calendar.description),l.zb(2),l.ec("ngForOf",t.allService),l.zb(2),l.Cb("btn btn-outline-",t.theme," btn-fw"),l.ec("disabled",!e.valid)}},directives:[n.i,S.u,S.i,S.j,S.b,S.q,S.h,S.k,n.j,S.l,S.a],styles:[".swal2-styled.swal2-confirm[_ngcontent-%COMP%]{background-color:#389466!important}i.fa.fa-plus-circle[_ngcontent-%COMP%]{font-size:176px;cursor:pointer}div.desc[_ngcontent-%COMP%]{height:200px;overflow-y:hidden}div.desc[_ngcontent-%COMP%]:hover{overflow-y:scroll}.detail[_ngcontent-%COMP%]{font-size:12px}.text-center[_ngcontent-%COMP%]{text-align:center;width:100%}.right[_ngcontent-%COMP%]{float:right}.btn[_ngcontent-%COMP%]{margin-top:5px}"]}),e})();var ee=i("mrSG"),te=i("iOEq"),ie=i("Gbwi"),ne=i("p8AH"),ae=i("MT0H"),re=i("IvIE");function ce(e,t){if(1&e&&(l.Rb(0,"div",7),l.Rb(1,"p"),l.tc(2),l.Qb(),l.Qb()),2&e){const e=t.$implicit,i=l.bc();l.gc("routerLink","/user/avilablity/",e._id,""),l.fc("routerLinkActive",i.theme),l.zb(2),l.uc(e.name)}}function le(e,t){if(1&e){const e=l.Sb();l.Rb(0,"div",9),l.Rb(1,"div",10),l.Rb(2,"h4",12),l.tc(3,"Enter regular hours every week"),l.Qb(),l.Rb(4,"div",13),l.Rb(5,"div",14),l.Rb(6,"div",15),l.Rb(7,"table",16),l.Rb(8,"thead",17),l.Rb(9,"tr"),l.Rb(10,"td",18),l.Rb(11,"div",19),l.Rb(12,"table",16),l.Rb(13,"thead"),l.Rb(14,"tr"),l.Rb(15,"th",20),l.Rb(16,"span"),l.tc(17,"Sun"),l.Qb(),l.Qb(),l.Rb(18,"th",21),l.Rb(19,"span"),l.tc(20,"Mon"),l.Qb(),l.Qb(),l.Rb(21,"th",22),l.Rb(22,"span"),l.tc(23,"Tue"),l.Qb(),l.Qb(),l.Rb(24,"th",23),l.Rb(25,"span"),l.tc(26,"Wed"),l.Qb(),l.Qb(),l.Rb(27,"th",24),l.Rb(28,"span"),l.tc(29,"Thu"),l.Qb(),l.Qb(),l.Rb(30,"th",25),l.Rb(31,"span"),l.tc(32,"Fri"),l.Qb(),l.Qb(),l.Rb(33,"th",26),l.Rb(34,"span"),l.tc(35,"Sat"),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(36,"tbody",27),l.Rb(37,"tr"),l.Rb(38,"td",28),l.Rb(39,"div",29),l.Rb(40,"div",30),l.Rb(41,"div",31),l.Rb(42,"div",32),l.Rb(43,"table",16),l.Rb(44,"tbody"),l.Rb(45,"tr"),l.Rb(46,"td",33),l.Zb("click",(function(){l.lc(e);const t=l.bc(2);return t.enterWeekData(t.currentService.day0,t.currentService._id,"day0")})),l.Nb(47,"br"),l.tc(48),l.Qb(),l.Rb(49,"td",33),l.Zb("click",(function(){l.lc(e);const t=l.bc(2);return t.enterWeekData(t.currentService.day1,t.currentService._id,"day1")})),l.Nb(50,"br"),l.tc(51),l.Qb(),l.Rb(52,"td",33),l.Zb("click",(function(){l.lc(e);const t=l.bc(2);return t.enterWeekData(t.currentService.day2,t.currentService._id,"day2")})),l.Nb(53,"br"),l.tc(54),l.Qb(),l.Rb(55,"td",33),l.Zb("click",(function(){l.lc(e);const t=l.bc(2);return t.enterWeekData(t.currentService.day3,t.currentService._id,"day3")})),l.Nb(56,"br"),l.tc(57),l.Qb(),l.Rb(58,"td",33),l.Zb("click",(function(){l.lc(e);const t=l.bc(2);return t.enterWeekData(t.currentService.day4,t.currentService._id,"day4")})),l.Nb(59,"br"),l.tc(60),l.Qb(),l.Rb(61,"td",33),l.Zb("click",(function(){l.lc(e);const t=l.bc(2);return t.enterWeekData(t.currentService.day5,t.currentService._id,"day5")})),l.Nb(62,"br"),l.tc(63),l.Qb(),l.Rb(64,"td",33),l.Zb("click",(function(){l.lc(e);const t=l.bc(2);return t.enterWeekData(t.currentService.day6,t.currentService._id,"day6")})),l.Nb(65,"br"),l.tc(66),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb()}if(2&e){const e=l.bc(2);l.zb(48),l.vc(" ",e.currentService.day0," "),l.zb(3),l.vc(" ",e.currentService.day1," "),l.zb(3),l.vc(" ",e.currentService.day2," "),l.zb(3),l.vc(" ",e.currentService.day3," "),l.zb(3),l.vc(" ",e.currentService.day4," "),l.zb(3),l.vc(" ",e.currentService.day5," "),l.zb(3),l.vc(" ",e.currentService.day6," ")}}function oe(e,t){if(1&e){const e=l.Sb();l.Rb(0,"div"),l.rc(1,le,67,7,"div",8),l.Nb(2,"br"),l.Rb(3,"div",9),l.Rb(4,"div",10),l.Rb(5,"full-calendar",11),l.Zb("dateClick",(function(t){return l.lc(e),l.bc().handleDateClick(t)})),l.Qb(),l.Qb(),l.Qb(),l.Qb()}if(2&e){const e=l.bc();l.zb(1),l.ec("ngIf",!e.currentService.started),l.zb(4),l.ec("plugins",e.calendarPlugins)("events",e.calendarEvents)}}function se(e,t){1&e&&(l.Rb(0,"div",34),l.Rb(1,"div",35),l.Rb(2,"div",10),l.Rb(3,"div",36),l.Rb(4,"div",37),l.Rb(5,"p",38),l.tc(6,"Please select a service"),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb())}let be=(()=>{class e{constructor(e,t,i,n,a,r){this.router=e,this.bs=t,this.os=i,this.calc=n,this.actroute=a,this.themeChangeService=r,this.calendarPlugins=[te.d,ne.a,ie.a],this.currentCalendarEvent={title:"9:30AM - 3:40PM ",date:""},this.calendarEvents=[],this.calculatedCalendarEvents=[],this.endDate=new Date("2050-12-31"),this.currentService=new w.a}ngOnInit(){this.getId(),this.theme=localStorage.getItem("theme"),this.userId=this.bs.token().id,this.themeChange()}themeChange(){this.themeChangeService.themeLoad$.subscribe(e=>this.theme=e)}getId(){this.actroute.paramMap.subscribe(e=>{this.serviceId=e.get("id"),this.allServiceOfUser()})}getAllAvilablity(){this.calendarEvents=this.calc.calculateCurrentEventForAvailablity(this.currentService,this.endDate),this.bs.allAvilablity({serviceId:this.currentService._id}).subscribe(e=>{console.log(e);const t=this.calendarEvents.filter(({date:t})=>!e.some(({date:e})=>t===e));this.calendarEvents=e.concat(t)},e=>{console.log(e)})}allServiceOfUser(){this.bs.allServiceOfUser({userId:this.bs.token().id}).subscribe(e=>{this.allService=e,this.getCurrentService()},e=>{console.log(e)})}getCurrentEvent(){this.currentService=this.allService.filter(e=>e._id==this.serviceId)[0]}getCurrentService(){this.currentService=this.allService.filter(e=>e._id==this.serviceId)[0],this.getAllAvilablity()}handleDateClick(e){return Object(ee.a)(this,void 0,void 0,(function*(){if(this.compareDate(e.dateStr)){let t=yield this.getCurrentCalendarEvent(e.dateStr);t||(t="");const{value:i}=yield Q.a.fire({title:"Enter availability",input:"textarea",inputValue:t,inputPlaceholder:"Enter availability like: 9:00am-12:30pm, 1:30pm-6pm",showCancelButton:!0,confirmButtonText:"Update",cancelButtonText:"Cancel",inputValidator:e=>e?this.validateDate(e)?void 0:"Invalid Date String!":"You need to write something!",customClass:{popup:"swal-popup-class del-popup-size",header:"header-class",title:"title-class",image:"image-class",actions:"actions-class",confirmButton:"confirm-button-class",cancelButton:"cancel-button-class"}});if(i){let t=this.validateDate(i),n=this.eventRange(t,new Date(e.dateStr));console.log(n),this.bs.updateAvilablity(n).subscribe(e=>{this.getAllAvilablity(),this.os.swall(e.type,e.message)},e=>{console.log(e)})}}else this.os.notAllowDateRange()}))}eventRange(e,t){return{date:y(t).format("YYYY-MM-DD"),title:e,userId:this.userId,serviceId:this.currentService._id,bookingSlot:this.calc.bookingslot(e,this.currentService.duration,this.currentService.rest)}}validateDate(e){if("closed"==e.toLowerCase())return"Closed";{let t=/^((1[0-2]|0?[1-9]):([0-5][0-9]) ?([AaPp][Mm]))-((1[0-2]|0?[1-9]):([0-5][0-9]) ?([AaPp][Mm]))?$/,i=e.toUpperCase().replace(/ +/g,"").replace(/AM/g," AM").replace(/PM/g," PM").split(","),n="";for(let e in i){let a=i[e].split("-");if(2==a.length){a[0]=this.reconstructDate(a[0]),a[1]=this.reconstructDate(a[1]);let e=a[0]+"-"+a[1];if(t.test(e)){let t=new Date("01/01/1970 "+a[0]).getTime(),i=new Date("01/01/1970 "+a[1]).getTime();t<i&&i-t>6e4*this.currentService.rest&&(n+=e+",")}}}return n.substring(0,n.length-1)}}reconstructDate(e){if(-1==e.search("AM")&&-1==e.search("PM"))if(-1==e.search(":"))e+=":00 AM";else{let t=e.split(":");e+=1==t[1].length?"0 AM":" AM"}else if(-1==e.search(":")){let t=e.split(" ");t[0]=t[0]+":00",e=t[0]+" "+t[1]}return e}compareDate(e){let t,i,n=new Date(e).getTime(),a=y(new Date).format("YYYY-MM-DD");return t=new Date(this.currentService.startDate).getTime()<new Date(a).getTime()?new Date(a).getTime():new Date(this.currentService.startDate).getTime(),i=this.currentService.endDate?new Date(this.currentService.endDate).getTime():this.endDate.getTime(),t<=n&&n<=i}getCurrentCalendarEvent(e){return Object(ee.a)(this,void 0,void 0,(function*(){return this.currentCalendarEvent=this.calendarEvents.filter(t=>t.date==e)[0],this.currentCalendarEvent?this.currentCalendarEvent.title:""}))}getDaysArray(e,t,i,n=""){e.getTime()<(new Date).getTime()&&(e=new Date);let a=[];for(var r=[],c=e;c<=t;c.setDate(c.getDate()+1))r.push(new Date(c));r.map(e=>e.toISOString().slice(0,10)).join("");for(let l in r)a.push({date:y(r[l]).format("YYYY-MM-DD"),title:i,userId:this.userId,serviceId:this.currentService._id,bookingSlot:this.calc.bookingslot(i,this.currentService.duration,this.currentService.rest)});return a}enterWeekData(e,t,i){return Object(ee.a)(this,void 0,void 0,(function*(){e||(e="");const{value:n}=yield Q.a.fire({title:"Enter availability",input:"textarea",inputValue:e,inputPlaceholder:"Enter availability like: 9:00am-12:30pm, 1:30pm-6pm",showCancelButton:!0,confirmButtonText:"Update",cancelButtonText:"Cancel",inputValidator:e=>e?this.validateDate(e)?void 0:"Invalid Date String!":"You need to write something!",customClass:{popup:"swal-popup-class del-popup-size",header:"header-class",title:"title-class",image:"image-class",actions:"actions-class",confirmButton:"confirm-button-class",cancelButton:"cancel-button-class"}});if(n){let e=this.validateDate(n);if(e){var a;switch(i){case"day0":a=this.bs.updateTimeSlotService({_id:t,day0:e,day0bookingSlot:this.calc.bookingslot(e,this.currentService.duration,this.currentService.rest)});break;case"day1":a=this.bs.updateTimeSlotService({_id:t,day1:e,day1bookingSlot:this.calc.bookingslot(e,this.currentService.duration,this.currentService.rest)});break;case"day2":a=this.bs.updateTimeSlotService({_id:t,day2:e,day2bookingSlot:this.calc.bookingslot(e,this.currentService.duration,this.currentService.rest)});break;case"day3":a=this.bs.updateTimeSlotService({_id:t,day3:e,day3bookingSlot:this.calc.bookingslot(e,this.currentService.duration,this.currentService.rest)});break;case"day4":a=this.bs.updateTimeSlotService({_id:t,day4:e,day4bookingSlot:this.calc.bookingslot(e,this.currentService.duration,this.currentService.rest)});break;case"day5":a=this.bs.updateTimeSlotService({_id:t,day5:e,day5bookingSlot:this.calc.bookingslot(e,this.currentService.duration,this.currentService.rest)});break;case"day6":a=this.bs.updateTimeSlotService({_id:t,day6:e,day6bookingSlot:this.calc.bookingslot(e,this.currentService.duration,this.currentService.rest)})}a.subscribe(e=>{this.allServiceOfUser(),this.os.swall("success",e.message)},e=>{console.log(e)})}}}))}}return e.\u0275fac=function(t){return new(t||e)(l.Mb(a.b),l.Mb(o.a),l.Mb(k.a),l.Mb(ae.a),l.Mb(a.a),l.Mb(s.a))},e.\u0275cmp=l.Gb({type:e,selectors:[["app-avilablity"]],decls:8,vars:3,consts:[[1,"row"],[1,"col-md-3"],[1,"fc-external-events"],["class","fc-event",3,"routerLink","routerLinkActive",4,"ngFor","ngForOf"],[1,"col-md-9"],[4,"ngIf","ngIfElse"],["cur",""],[1,"fc-event",3,"routerLink","routerLinkActive"],["class","card",4,"ngIf"],[1,"card"],[1,"card-body"],["defaultView","dayGridMonth",3,"plugins","events","dateClick"],[1,"card-title"],["id","calendar",1,"full-calendar","fc","fc-unthemed","fc-ltr"],[1,"fc-view-container"],[1,"fc-view","fc-month-view","fc-basic-view"],[1,""],[1,"fc-head"],[1,"fc-head-container","fc-widget-header"],[1,"fc-row","fc-widget-header"],[1,"fc-day-header","fc-widget-header","fc-sun"],[1,"fc-day-header","fc-widget-header","fc-mon"],[1,"fc-day-header","fc-widget-header","fc-tue"],[1,"fc-day-header","fc-widget-header","fc-wed"],[1,"fc-day-header","fc-widget-header","fc-thu"],[1,"fc-day-header","fc-widget-header","fc-fri"],[1,"fc-day-header","fc-widget-header","fc-sat"],[1,"fc-body"],[1,"fc-widget-content"],[1,"fc-scroller","fc-day-grid-container",2,"overflow","hidden","height","570.2px"],[1,"fc-day-grid","fc-unselectable"],[1,"fc-row","fc-week","fc-widget-content","fc-rigid",2,"height","95px"],[1,"fc-bg"],[1,"fc-day","fc-widget-content","date-wrap",3,"click"],[1,"col-md-12","grid-margin","mt-4"],[1,"card","d-flex","align-items-center"],[1,"d-flex","flex-row","align-items-center"],[1,"ml-3"],[1,"mt-2","text-muted","card-text"]],template:function(e,t){if(1&e&&(l.Rb(0,"div",0),l.Rb(1,"div",1),l.Rb(2,"div",2),l.rc(3,ce,3,3,"div",3),l.Qb(),l.Qb(),l.Rb(4,"div",4),l.rc(5,oe,6,3,"div",5),l.rc(6,se,7,0,"ng-template",null,6,l.sc),l.Qb(),l.Qb()),2&e){const e=l.ic(7);l.zb(3),l.ec("ngForOf",t.allService),l.zb(2),l.ec("ngIf",t.currentService)("ngIfElse",e)}},directives:[n.i,n.j,a.c,a.d,re.a],styles:[".date-wrap[_ngcontent-%COMP%]{padding:5px;font-size:10px}"]}),e})();var de=i("lJxs");function ue(e,t){if(1&e&&(l.Rb(0,"div",7),l.Rb(1,"p"),l.tc(2),l.Qb(),l.Qb()),2&e){const e=t.$implicit,i=l.bc();l.gc("routerLink","/user/appointment/",e._id,""),l.fc("routerLinkActive",i.theme),l.zb(2),l.uc(e.name)}}function pe(e,t){if(1&e&&(l.Rb(0,"h4"),l.tc(1),l.cc(2,"date"),l.Qb()),2&e){const e=l.bc(2);l.zb(1),l.vc(" Timeslot of ",l.dc(2,1,e.selectedDate,"MMM dd y"),"")}}function he(e,t){if(1&e){const e=l.Sb();l.Rb(0,"div",25),l.Zb("click",(function(){l.lc(e);const t=l.bc().$implicit;return l.bc(4).appointmentOfDay(t.time)})),l.Rb(1,"span",26),l.tc(2),l.Qb(),l.Nb(3,"br"),l.Rb(4,"span"),l.tc(5),l.Qb(),l.Qb()}if(2&e){const e=l.bc().$implicit;l.Db("booked",e.booked),l.zb(2),l.vc(" ",e.time," "),l.zb(2),l.Cb("bladge bladge-",e.booked,""),l.zb(1),l.vc(" Booked : ",e.total,"")}}function me(e,t){if(1&e&&(l.Rb(0,"span"),l.rc(1,he,6,7,"div",24),l.Qb()),2&e){const e=t.index,i=l.bc(4);l.zb(1),l.ec("ngIf",e>=i.start&&e<=i.end)}}function fe(e,t){if(1&e){const e=l.Sb();l.Rb(0,"div",9),l.Rb(1,"div",14),l.Nb(2,"div",15),l.Nb(3,"div",16),l.Rb(4,"div",17),l.Rb(5,"div",18),l.Rb(6,"button",19),l.Zb("click",(function(){return l.lc(e),l.bc(3).prev()})),l.Nb(7,"span",20),l.Qb(),l.Rb(8,"button",21),l.Zb("click",(function(){return l.lc(e),l.bc(3).next()})),l.Nb(9,"span",22),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.rc(10,me,2,1,"span",23),l.Qb()}if(2&e){const e=l.bc(3);l.zb(6),l.ec("disabled",!1),l.zb(2),l.ec("disabled",!1),l.zb(2),l.ec("ngForOf",e.allTimeSlotOfDay)}}function ge(e,t){1&e&&(l.Rb(0,"div",9),l.Rb(1,"div",27),l.tc(2," No availablity mentioned for this day "),l.Qb(),l.Qb())}function ve(e,t){if(1&e&&(l.Rb(0,"div",8),l.rc(1,fe,11,3,"div",13),l.rc(2,ge,3,0,"div",13),l.Qb()),2&e){const e=l.bc(2);l.zb(1),l.ec("ngIf",e.allTimeSlotOfDay.length>0),l.zb(1),l.ec("ngIf",0==e.allTimeSlotOfDay.length)}}function Re(e,t){if(1&e&&(l.Rb(0,"h4"),l.tc(1),l.Qb()),2&e){const e=l.bc(2);l.zb(1),l.vc(" Appointments of ",e.selectedTimeStr,"")}}function Qe(e,t){if(1&e&&(l.Rb(0,"div",29),l.Rb(1,"div",8),l.Rb(2,"div",30),l.Rb(3,"h6",31),l.Rb(4,"a",32),l.tc(5),l.Qb(),l.Qb(),l.Qb(),l.Rb(6,"div",33),l.Rb(7,"div",9),l.Rb(8,"div",34),l.Rb(9,"ul",35),l.Rb(10,"li"),l.Rb(11,"h6"),l.tc(12,"User Information "),l.Qb(),l.Rb(13,"div",36),l.Rb(14,"p"),l.Nb(15,"i",37),l.tc(16),l.Qb(),l.Rb(17,"p"),l.Nb(18,"i",38),l.tc(19),l.Qb(),l.Rb(20,"p"),l.Nb(21,"i",39),l.tc(22),l.Qb(),l.Qb(),l.Rb(23,"div",40),l.Rb(24,"p"),l.Nb(25,"i",37),l.tc(26),l.Qb(),l.Rb(27,"p"),l.Nb(28,"i",38),l.tc(29),l.Qb(),l.Rb(30,"p"),l.Nb(31,"i",39),l.tc(32),l.Qb(),l.Qb(),l.Qb(),l.Rb(33,"li"),l.Rb(34,"h6"),l.tc(35,"Appointmet taken on"),l.Qb(),l.Nb(36,"br"),l.Rb(37,"p",41),l.Nb(38,"i",42),l.tc(39),l.cc(40,"date"),l.Qb(),l.Nb(41,"br"),l.Qb(),l.Rb(42,"li"),l.Rb(43,"h6"),l.tc(44,"Payment details"),l.Qb(),l.Rb(45,"p"),l.tc(46,"Can you please assign the task for the team"),l.Qb(),l.Rb(47,"p",43),l.Nb(48,"i",44),l.tc(49," 1 year ago. "),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb()),2&e){const e=t.$implicit,i=t.index;l.zb(2),l.gc("id","heading-",i,""),l.zb(2),l.gc("href","#collapse-",i,"",l.nc),l.zb(1),l.wc(" ",e.userDetail.firstName," ",e.userDetail.lastName," "),l.zb(1),l.gc("id","collapse-",i,""),l.zb(10),l.wc(" \xa0 \xa0 ",e.userDetail.firstName," ",e.userDetail.lastName,""),l.zb(3),l.vc(" \xa0 \xa0 ",e.userDetail.email,""),l.zb(3),l.vc(" \xa0 \xa0 ",e.userDetail.phone,""),l.zb(4),l.wc(" \xa0 \xa0 ",e.userId.firstName," ",e.userId.lastName,""),l.zb(3),l.vc(" \xa0 \xa0 ",e.userId.email,""),l.zb(3),l.vc(" \xa0 \xa0 ",e.userId.phone,""),l.zb(7),l.vc(" \xa0 \xa0 ",l.dc(40,14,e.createdAt,"MMM d, y, h:mm a"),"")}}function ye(e,t){if(1&e&&(l.Rb(0,"div"),l.rc(1,Qe,50,17,"div",28),l.Qb()),2&e){const e=l.bc(2);l.zb(1),l.ec("ngForOf",e.allAppointmentOfDayTime)}}function we(e,t){1&e&&(l.Rb(0,"div",9),l.Rb(1,"div",27),l.tc(2," This timeslot is not booked yet "),l.Qb(),l.Qb())}function ke(e,t){if(1&e){const e=l.Sb();l.Rb(0,"div"),l.Rb(1,"div",8),l.Rb(2,"div",9),l.Rb(3,"full-calendar",10),l.Zb("dateClick",(function(t){return l.lc(e),l.bc().handleDateClick(t)})),l.Qb(),l.Qb(),l.Qb(),l.Nb(4,"br"),l.Nb(5,"br"),l.rc(6,pe,3,4,"h4",11),l.rc(7,ve,3,2,"div",12),l.Nb(8,"br"),l.Nb(9,"br"),l.rc(10,Re,2,1,"h4",11),l.rc(11,ye,2,1,"div",11),l.Rb(12,"div",8),l.rc(13,we,3,0,"div",13),l.Qb(),l.Qb()}if(2&e){const e=l.bc();l.zb(3),l.ec("plugins",e.calendarPlugins)("events",e.calendarEvents),l.zb(3),l.ec("ngIf",e.selectedDate),l.zb(1),l.ec("ngIf",!!e.allTimeSlotOfDay),l.zb(3),l.ec("ngIf",e.selectedTimeStr),l.zb(1),l.ec("ngIf",!!e.allAppointmentOfDayTime),l.zb(2),l.ec("ngIf",!!e.allAppointmentOfDayTime&&0==e.allAppointmentOfDayTime.length&&e.selectedTimeStr)}}function Se(e,t){1&e&&(l.Rb(0,"div",45),l.Rb(1,"div",46),l.Rb(2,"div",9),l.Rb(3,"div",47),l.Rb(4,"div",48),l.Rb(5,"p",49),l.tc(6,"Please select a service"),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb())}let xe=(()=>{class e{constructor(e,t,i,n,a,r){this.router=e,this.bs=t,this.os=i,this.calc=n,this.actroute=a,this.themeChangeService=r,this.start=0,this.end=3,this.calendarPlugins=[te.d,ne.a,ie.a],this.currentCalendarEvent={title:"9:30AM - 3:40PM ",date:""},this.calendarEvents=[],this.calculatedCalendarEvents=[],this.endDate=new Date("2050-12-31"),this.currentService=new w.a}ngOnInit(){this.getId(),this.theme=localStorage.getItem("theme"),this.userId=this.bs.token().id,this.themeChange()}themeChange(){this.themeChangeService.themeLoad$.subscribe(e=>this.theme=e)}getId(){this.actroute.paramMap.subscribe(e=>{this.serviceId=e.get("id"),this.allServiceOfUser()})}allServiceOfUser(){this.bs.allServiceOfUser({userId:this.bs.token().id}).subscribe(e=>{this.allService=e,this.getCurrentService()},e=>{console.log(e)})}getCurrentService(){this.currentService=this.allService.filter(e=>e._id==this.serviceId)[0],this.allAppointmentOfService()}handleDateClick(e){this.start=0,this.end=3,this.selectedDate=new Date(e.dateStr),this.selectedDateStr=e.dateStr,this.allAppointmentOfDayTime=[],this.allAppointmentOfDay=[],this.selectedTimeStr="",this.bs.appointmentOfDay({date:this.selectedDateStr,serviceId:this.currentService._id}).subscribe(t=>{this.allAppointmentOfDay=t.appointments,console.log(this.allAppointmentOfDay),this.timeSlotOfDay({date:e.dateStr,serviceId:this.currentService._id},e.dateStr)},e=>{console.log(e)})}timeSlotOfDay(e,t){this.bs.timeSlotOfDay(e).subscribe(e=>{if(""!=e.appointments)this.allTimeSlotOfDay=e.appointments,this.prepareTimeslot();else{let e=new Date(t).getDay();this.allTimeSlotOfDay=this.currentService["day"+e+"bookingSlot"],this.prepareTimeslot()}},e=>{console.log(e)})}prepareTimeslot(){for(let e in this.allTimeSlotOfDay){let t=this.allAppointmentOfDay.filter(t=>t.time==this.allTimeSlotOfDay[e].time);t.length?(this.allTimeSlotOfDay[e].booked=!0,this.allTimeSlotOfDay[e].total=t.length):(this.allTimeSlotOfDay[e].booked=!1,this.allTimeSlotOfDay[e].total=0)}}appointmentOfDay(e){this.selectedTimeStr=e,this.bs.appointmentOfDay({date:this.selectedDateStr,serviceId:this.currentService._id,time:e}).subscribe(e=>{this.allAppointmentOfDayTime=e.appointments},e=>{console.log(e)})}prev(){0!=this.start&&(this.start=this.start-4,this.end=this.end-4)}next(){if(this.allTimeSlotOfDay.length>this.end+1){let e=this.allTimeSlotOfDay.length-this.end,t=this.allTimeSlotOfDay.length%4;(e>4||e>t)&&(this.start=this.start+4,this.end=this.end+4)}}allAppointmentOfService(){this.bs.allAppointmentOfService({serviceId:this.currentService._id}).pipe(Object(de.a)(e=>this.prepareEvent(e))).subscribe(e=>{console.log(e),this.calendarEvents=e},e=>{console.log(e)})}prepareEvent(e){for(let t in e)e[t].title="Booked :"+e.filter(i=>i.date==e[t].date).length;return e.filter((e,t,i)=>i.map(e=>e.date).indexOf(e.date)===t)}}return e.\u0275fac=function(t){return new(t||e)(l.Mb(a.b),l.Mb(o.a),l.Mb(k.a),l.Mb(ae.a),l.Mb(a.a),l.Mb(s.a))},e.\u0275cmp=l.Gb({type:e,selectors:[["app-appointment"]],decls:8,vars:3,consts:[[1,"row"],[1,"col-md-3"],[1,"fc-external-events"],["class","fc-event",3,"routerLink","routerLinkActive",4,"ngFor","ngForOf"],[1,"col-md-9"],[4,"ngIf","ngIfElse"],["cur",""],[1,"fc-event",3,"routerLink","routerLinkActive"],[1,"card"],[1,"card-body"],["defaultView","dayGridMonth",3,"plugins","events","dateClick"],[4,"ngIf"],["class","card",4,"ngIf"],["class","card-body",4,"ngIf"],[1,"fc-toolbar","fc-header-toolbar"],[1,"fc-left"],[1,"fc-center"],[1,"fc-right"],[1,"fc-button-group"],["type","button","aria-label","prev",1,"fc-prev-button","fc-button","fc-button-primary",3,"disabled","click"],[1,"fc-icon","fc-icon-chevron-left"],["type","button","aria-label","next",1,"fc-next-button","fc-button","fc-button-primary",3,"disabled","click"],[1,"fc-icon","fc-icon-chevron-right"],[4,"ngFor","ngForOf"],["class","block-wrap",3,"booked","click",4,"ngIf"],[1,"block-wrap",3,"click"],[1,"time"],[1,"block-wrap-not-available"],["class","accordion accordion-solid-header",4,"ngFor","ngForOf"],[1,"accordion","accordion-solid-header"],["role","tab",1,"card-header",3,"id"],[1,"mb-0"],["data-toggle","collapse","aria-expanded","false",1,"collapsed",3,"href"],["role","tabpanel",1,"collapse",3,"id"],[1,"grid-margin","stretch-card"],[1,"bullet-line-list"],[1,"block-wrap-dettail"],[1,"fa","fa-user-circle-o"],[1,"fa","fa-envelope-o"],[1,"fa","fa-phone-square"],[1,"block-wrap-dettail","ml2"],[1,"gray-element"],[1,"fa","fa-clock-o"],[1,"text-muted"],[1,"ti-time"],[1,"col-md-12","grid-margin","mt-4"],[1,"card","d-flex","align-items-center"],[1,"d-flex","flex-row","align-items-center"],[1,"ml-3"],[1,"mt-2","text-muted","card-text"]],template:function(e,t){if(1&e&&(l.Rb(0,"div",0),l.Rb(1,"div",1),l.Rb(2,"div",2),l.rc(3,ue,3,3,"div",3),l.Qb(),l.Qb(),l.Rb(4,"div",4),l.rc(5,ke,14,7,"div",5),l.rc(6,Se,7,0,"ng-template",null,6,l.sc),l.Qb(),l.Qb()),2&e){const e=l.ic(7);l.zb(3),l.ec("ngForOf",t.allService),l.zb(2),l.ec("ngIf",t.currentService)("ngIfElse",e)}},directives:[n.i,n.j,a.c,a.d,re.a],pipes:[n.d],styles:[".accordion.accordion-solid-header[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   a[aria-expanded=true][_ngcontent-%COMP%]{background:#000;color:#fff}.date-wrap[_ngcontent-%COMP%]{padding:5px;font-size:10px}.block-wrap[_ngcontent-%COMP%]{display:inline-block;border:1px solid hsla(0,0%,100%,.1);font-size:11px;font-weight:400;color:#a8b2b9;cursor:pointer;padding:20px;width:25%;text-align:center}.block-wrap[_ngcontent-%COMP%]:hover{background-color:#2c3e50}i.fa[_ngcontent-%COMP%]{font-size:13px!important}.block-wrap-dettail[_ngcontent-%COMP%]{border:1px solid hsla(0,0%,100%,.1);color:#a8b2b9;cursor:pointer;padding:10px;width:48%;margin:20px 0;display:inline-block}.ml2[_ngcontent-%COMP%]{margin-left:2%}.bullet-line-list[_ngcontent-%COMP%]{width:100%}.gray-element[_ngcontent-%COMP%]{color:#a8b2b9}@media only screen and (max-width:600px){.block-wrap-dettail[_ngcontent-%COMP%]{width:100%}.ml2[_ngcontent-%COMP%]{margin-left:0;margin-top:0!important}}.block-wrap-not-available[_ngcontent-%COMP%]{font-size:14px;text-align:center;color:#f16857}.booked[_ngcontent-%COMP%]{background-color:#162b3b}span.bladge[_ngcontent-%COMP%]{color:#f16857}.bladge-false[_ngcontent-%COMP%]{visibility:hidden!important}@media screen and (max-width:600px){.fc-toolbar.fc-header-toolbar[_ngcontent-%COMP%]{margin-bottom:15px!important}}"]}),e})();function Me(e,t){if(1&e){const e=l.Sb();l.Rb(0,"div",8),l.Rb(1,"div",4),l.Rb(2,"div",9),l.Rb(3,"h6",10),l.Rb(4,"a",11),l.tc(5),l.Nb(6,"br"),l.Rb(7,"p",12),l.tc(8),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(9,"div",13),l.Rb(10,"div",5),l.Rb(11,"div",14),l.Rb(12,"ul",15),l.Rb(13,"li"),l.Rb(14,"h6"),l.tc(15,"Appointment with "),l.Qb(),l.Rb(16,"div",16),l.Rb(17,"p"),l.Nb(18,"i",17),l.tc(19),l.Qb(),l.Rb(20,"p"),l.Nb(21,"i",18),l.tc(22),l.Qb(),l.Rb(23,"p"),l.Nb(24,"i",19),l.tc(25),l.Qb(),l.Qb(),l.Qb(),l.Rb(26,"li"),l.Rb(27,"h6"),l.tc(28,"User Information "),l.Qb(),l.Rb(29,"div",16),l.Rb(30,"p"),l.Nb(31,"i",17),l.tc(32," \xa0 \xa0 "),l.Nb(33,"span",20,21),l.tc(35),l.Qb(),l.Rb(36,"p"),l.Nb(37,"i",18),l.tc(38),l.Qb(),l.Rb(39,"button",22),l.Zb("click",(function(){l.lc(e);const i=t.$implicit,n=t.index;return l.bc(3).edit(i,n)})),l.Nb(40,"i",23),l.tc(41," Edit"),l.Qb(),l.Rb(42,"p"),l.Nb(43,"i",19),l.tc(44),l.Qb(),l.Qb(),l.Qb(),l.Rb(45,"li"),l.Rb(46,"h6"),l.tc(47,"Appointmet created at"),l.Qb(),l.Nb(48,"br"),l.Rb(49,"p",24),l.Nb(50,"i",25),l.tc(51),l.cc(52,"date"),l.Qb(),l.Nb(53,"br"),l.Qb(),l.Rb(54,"li"),l.Rb(55,"h6"),l.tc(56,"Payment details"),l.Qb(),l.Rb(57,"p"),l.tc(58,"Can you please assign the task for the team"),l.Qb(),l.Rb(59,"p",26),l.Nb(60,"i",27),l.tc(61," 1 year ago. "),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb()}if(2&e){const e=t.$implicit,i=t.index;l.zb(2),l.gc("id","heading-",i,""),l.zb(2),l.gc("href","#collapse-",i,"",l.nc),l.zb(1),l.vc(" ",e.serviceId.name," "),l.zb(3),l.wc(" ",e.date," ( ",e.time," )"),l.zb(1),l.gc("id","collapse-",i,""),l.zb(10),l.wc(" \xa0 \xa0 ",e.onerId.firstName," ",e.onerId.lastName,""),l.zb(3),l.vc(" \xa0 \xa0 ",e.onerId.email,""),l.zb(3),l.vc(" \xa0 \xa0 ",e.onerId.phone,""),l.zb(10),l.wc(" ",e.userDetail.firstName," ",e.userDetail.lastName,""),l.zb(3),l.vc(" \xa0 \xa0 ",e.userDetail.email,""),l.zb(6),l.vc(" \xa0 \xa0 ",e.userDetail.phone,""),l.zb(7),l.vc(" \xa0 \xa0 ",l.dc(52,15,e.createdAt,"MMM d, y, h:mm a"),"")}}function Ce(e,t){if(1&e&&(l.Rb(0,"div"),l.rc(1,Me,62,18,"div",7),l.Qb()),2&e){const e=l.bc(2);l.zb(1),l.ec("ngForOf",e.selectedApointments)}}function De(e,t){if(1&e){const e=l.Sb();l.Rb(0,"div"),l.Rb(1,"div",4),l.Rb(2,"div",5),l.Rb(3,"full-calendar",6),l.Zb("dateClick",(function(t){return l.lc(e),l.bc().handleDateClick(t)})),l.Qb(),l.Qb(),l.Qb(),l.Nb(4,"br"),l.Nb(5,"br"),l.rc(6,Ce,2,1,"div",2),l.Qb()}if(2&e){const e=l.bc();l.zb(3),l.ec("plugins",e.calendarPlugins)("events",e.calendarEvents),l.zb(3),l.ec("ngIf",!!e.selectedApointments)}}function Oe(e,t){1&e&&(l.Rb(0,"span",43),l.tc(1,"First name is required "),l.Qb())}function Ie(e,t){1&e&&(l.Rb(0,"span",43),l.tc(1,"Last name is required "),l.Qb())}function ze(e,t){1&e&&(l.Rb(0,"span",43),l.tc(1,"Email is required "),l.Qb())}function Ne(e,t){1&e&&(l.Rb(0,"span",43),l.tc(1,"Invalid Email "),l.Qb())}function Pe(e,t){1&e&&(l.Rb(0,"span",43),l.tc(1,"Phone No is required "),l.Qb())}function Ae(e,t){1&e&&(l.Rb(0,"span",43),l.tc(1,"Phone No must contain 10 digit number"),l.Qb())}function _e(e,t){if(1&e){const e=l.Sb();l.Rb(0,"div",4),l.Rb(1,"div",5),l.Rb(2,"h4",28),l.Nb(3,"span",29),l.tc(4,"Update Your Information "),l.Qb(),l.Rb(5,"div",30),l.Rb(6,"form",31),l.Zb("ngSubmit",(function(){return l.lc(e),l.bc().updateDatail()})),l.Rb(7,"div",32),l.Rb(8,"label",33),l.tc(9,"Username"),l.Qb(),l.Nb(10,"input",34),l.rc(11,Oe,2,0,"span",35),l.Qb(),l.Rb(12,"div",32),l.Nb(13,"label",33),l.Nb(14,"input",36),l.rc(15,Ie,2,0,"span",35),l.Qb(),l.Rb(16,"div",37),l.Rb(17,"label",33),l.tc(18,"Email"),l.Qb(),l.Nb(19,"input",38),l.rc(20,ze,2,0,"span",35),l.rc(21,Ne,2,0,"span",35),l.Qb(),l.Rb(22,"div",37),l.Rb(23,"label",33),l.tc(24,"Phone"),l.Qb(),l.Nb(25,"input",39),l.rc(26,Pe,2,0,"span",35),l.rc(27,Ae,2,0,"span",35),l.Qb(),l.Rb(28,"div",40),l.Rb(29,"button",41),l.tc(30,"Update \xa0"),l.Nb(31,"i",42),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb()}if(2&e){const e=l.bc();l.zb(6),l.ec("formGroup",e.userProfile),l.zb(5),l.ec("ngIf",(null==e.firstame?null:e.firstame.touched)&&(null==e.firstame||null==e.firstame.errors?null:e.firstame.errors.required)),l.zb(4),l.ec("ngIf",(null==e.lastname?null:e.lastname.touched)&&(null==e.lastname||null==e.lastname.errors?null:e.lastname.errors.required)),l.zb(5),l.ec("ngIf",(null==e.email?null:e.email.touched)&&(null==e.email||null==e.email.errors?null:e.email.errors.required)),l.zb(1),l.ec("ngIf",(null==e.email?null:e.email.touched)&&(null==e.email?null:e.email.invalid)&&!(null!=e.email&&null!=e.email.errors&&e.email.errors.required)),l.zb(5),l.ec("ngIf",(null==e.getphone?null:e.getphone.touched)&&(null==e.getphone||null==e.getphone.errors?null:e.getphone.errors.required)),l.zb(1),l.ec("ngIf",(null==e.getphone?null:e.getphone.touched)&&(null==e.getphone||null==e.getphone.errors?null:e.getphone.errors.pattern)),l.zb(2),l.Cb("btn btn-outline-",e.theme," btn-fw submit-btn"),l.ec("disabled",!e.userProfile.valid)}}let Te=(()=>{class e{constructor(e,t,i,n){this.bs=e,this.fb=t,this.os=i,this.themeChangeService=n,this.updateform=!1,this.calendarPlugins=[te.d,ne.a,ie.a],this.calendarEvents=[],this.today=y(new Date).format("YYYY-MM-DD"),this.currentService=new w.a,this.userProfile=this.fb.group({firstName:["",S.s.required],lastName:["",S.s.required],email:["",[S.s.required,S.s.email]],phone:["",[S.s.required,S.s.pattern("^\\d{10}$")]]})}ngOnInit(){this.theme=localStorage.getItem("theme"),this.userId=this.bs.token().id,this.themeChange(),this.myAppointments(this.userId)}themeChange(){this.themeChangeService.themeLoad$.subscribe(e=>this.theme=e)}myAppointments(e){this.bs.myAppointments(e).pipe(Object(de.a)(e=>this.preparelist(e))).subscribe(e=>{this.calendarEvents=e.calEvents,this.appointments=e.allAppoints,this.selectedApointments=this.appointments.filter(e=>e.date==this.today)},e=>{console.log(e)})}preparelist(e){let t=[];for(let i in e)t.push({date:e[i].date,title:e[i].time});return{calEvents:t.filter((e,t,i)=>i.map(e=>e.date).indexOf(e.date)===t),allAppoints:e}}handleDateClick(e){console.log(e.dateStr),this.selectedApointments=this.appointments.filter(t=>t.date==e.dateStr),console.log(this.selectedApointments)}edit(e,t){this.updateform=!0,this.selectedApointmentForUpdate=e,this.selectedindex=t,this.userProfile.patchValue({firstName:this.selectedApointmentForUpdate.userDetail.firstName,lastName:this.selectedApointmentForUpdate.userDetail.lastName,email:this.selectedApointmentForUpdate.userDetail.email,phone:this.selectedApointmentForUpdate.userDetail.phone})}get firstame(){return this.userProfile.get("firstName")}get lastname(){return this.userProfile.get("lastName")}get email(){return this.userProfile.get("email")}get getphone(){return this.userProfile.get("phone")}updateDatail(){this.bs.updateBooking({_id:this.selectedApointmentForUpdate._id,userDetail:this.userProfile.value}).subscribe(e=>{"success"==e.type?(this.os.swall("success",e.message),this.updateform=!1,this.selectedApointments[this.selectedindex].userDetail=this.userProfile.value):this.os.swall("error",e.message)},e=>{console.log(e)}),console.log(this.userProfile.value)}}return e.\u0275fac=function(t){return new(t||e)(l.Mb(o.a),l.Mb(S.d),l.Mb(k.a),l.Mb(s.a))},e.\u0275cmp=l.Gb({type:e,selectors:[["app-my-appointment"]],decls:4,vars:2,consts:[[1,"row"],[1,"wrap-booking"],[4,"ngIf"],["class","card",4,"ngIf"],[1,"card"],[1,"card-body"],["defaultView","dayGridMonth",3,"plugins","events","dateClick"],["class","accordion accordion-solid-header",4,"ngFor","ngForOf"],[1,"accordion","accordion-solid-header"],["role","tab",1,"card-header",3,"id"],[1,"mb-0"],["data-toggle","collapse","aria-expanded","false",1,"collapsed",3,"href"],[1,"date-time"],["role","tabpanel",1,"collapse",3,"id"],[1,"grid-margin","stretch-card"],[1,"bullet-line-list"],[1,"block-wrap-dettail"],[1,"fa","fa-user-circle-o"],[1,"fa","fa-envelope-o"],[1,"fa","fa-phone-square"],["contenteditable",""],["firstName{{i}}",""],["type","button",1,"btn","btn-outline-info","btn-fw","mt-1","float-r",3,"click"],[1,"fa","fa-pencil-square-o"],[1,"gray-element"],[1,"fa","fa-clock-o"],[1,"text-muted"],[1,"ti-time"],[1,"step-title"],[1,"step-number"],[1,"form-wrap"],[1,"pt-3",3,"formGroup","ngSubmit"],[1,"form-group","half-input"],[1,"form-lavel"],["id","name","type","text","formControlName","firstName","name","firstName","placeholder","First name",1,"form-control","form-control-lg"],["class","code-help",4,"ngIf"],["id","name","type","text","formControlName","lastName","name","lastName","placeholder","Last name",1,"form-control","form-control-lg"],[1,"form-group"],["id","email","type","email","formControlName","email","name","email","placeholder","Email",1,"form-control","form-control-lg"],["id","phone","type","number","formControlName","phone","name","phone","placeholder","Phone No",1,"form-control","form-control-lg"],[1,"mt-3"],["type","submit",3,"disabled"],[1,"fa","fa-angle-double-right"],[1,"code-help"]],template:function(e,t){1&e&&(l.Rb(0,"div",0),l.Rb(1,"div",1),l.rc(2,De,7,3,"div",2),l.rc(3,_e,32,11,"div",3),l.Qb(),l.Qb()),2&e&&(l.zb(2),l.ec("ngIf",!t.updateform),l.zb(1),l.ec("ngIf",t.updateform))},directives:[n.j,re.a,n.i,S.u,S.i,S.f,S.b,S.h,S.e,S.n],pipes:[n.d],styles:[".accordion.accordion-solid-header[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   a[aria-expanded=true][_ngcontent-%COMP%]{background:#000;color:#fff}.date-wrap[_ngcontent-%COMP%]{padding:5px;font-size:10px}.block-wrap[_ngcontent-%COMP%]{display:inline-block;border:1px solid hsla(0,0%,100%,.1);font-size:11px;font-weight:400;color:#a8b2b9;cursor:pointer;padding:20px;width:25%;text-align:center}.block-wrap[_ngcontent-%COMP%]:hover{background-color:#2c3e50}i.fa[_ngcontent-%COMP%]{font-size:13px!important}.block-wrap-dettail[_ngcontent-%COMP%]{border:1px solid hsla(0,0%,100%,.1);color:#a8b2b9;cursor:pointer;padding:10px;width:48%;margin:20px 0;display:inline-block}.ml2[_ngcontent-%COMP%]{margin-left:2%}.bullet-line-list[_ngcontent-%COMP%]{width:100%}.gray-element[_ngcontent-%COMP%]{color:#a8b2b9}@media only screen and (max-width:600px){.block-wrap-dettail[_ngcontent-%COMP%]{width:100%}.ml2[_ngcontent-%COMP%]{margin-left:0;margin-top:0!important}}.date-time[_ngcontent-%COMP%]{color:grey;font-size:12px!important}.submit-btn[_ngcontent-%COMP%]{font-size:20px;padding:14px}.half-input[_ngcontent-%COMP%]{width:50%;display:inline-block}.float-r[_ngcontent-%COMP%]{float:right}"]}),e})();var Ee=i("8Dg9"),Fe=i("qgFi"),Ue=i("zyuS");const Le=["close"];function qe(e,t){if(1&e&&(l.Rb(0,"li"),l.Rb(1,"span"),l.tc(2),l.Qb(),l.Qb()),2&e){const e=t.$implicit;l.zb(2),l.vc(" ",e.name," ")}}function Ze(e,t){if(1&e&&(l.Rb(0,"button",15),l.tc(1,"Applied"),l.Qb()),2&e){const e=l.bc(3);l.Cb("btn btn-outline-",e.theme," btn-block "),l.ec("disabled",!0)}}function Be(e,t){if(1&e){const e=l.Sb();l.Rb(0,"button",16),l.Zb("click",(function(){l.lc(e);const t=l.bc().$implicit;return l.bc(2).applyPlan(t)})),l.tc(1,"Apply"),l.Qb()}if(2&e){const e=l.bc(3);l.Cb("btn btn-outline-",e.theme," btn-block cursor-pointer")}}function Ge(e,t){if(1&e&&(l.Rb(0,"div",3),l.Rb(1,"div"),l.Rb(2,"div",4),l.Rb(3,"h3"),l.tc(4),l.Qb(),l.Rb(5,"p",5),l.tc(6),l.Qb(),l.Rb(7,"h1",6),l.Nb(8,"span",7),l.tc(9,"\xa0"),l.Rb(10,"span"),l.tc(11),l.Qb(),l.Rb(12,"span",8),l.tc(13),l.Qb(),l.Qb(),l.Qb(),l.Rb(14,"ul",9),l.rc(15,qe,3,1,"li",10),l.Qb(),l.Rb(16,"div",11),l.rc(17,Ze,2,4,"button",12),l.rc(18,Be,2,3,"button",13),l.Qb(),l.Rb(19,"p",14),l.tc(20),l.Qb(),l.Qb(),l.Qb()),2&e){const e=t.$implicit,i=l.bc(2);l.zb(1),l.Cb("card border-",i.theme," border pricing-card-body"),l.Db("blackbg",e._id==i.userPackageId),l.zb(2),l.Cb("text-",i.theme,""),l.zb(1),l.uc(e.name),l.zb(2),l.wc("Include ",e.noOfService," Service with ",e.noOfCalendar," Calander"),l.zb(2),l.ec("innerHTML",e.currencySymbol,l.mc),l.zb(3),l.vc("",e.price,"/"),l.zb(2),l.uc(e.collectionPeriod),l.zb(2),l.ec("ngForOf",e.packageFeature),l.zb(2),l.ec("ngIf",e._id==i.userPackageId),l.zb(1),l.ec("ngIf",!(e._id==i.userPackageId)),l.zb(2),l.uc(e.description)}}function Ye(e,t){if(1&e&&(l.Rb(0,"div",1),l.rc(1,Ge,21,18,"div",2),l.Qb()),2&e){const e=l.bc();l.zb(1),l.ec("ngForOf",e.allpackage)}}function $e(e,t){if(1&e){const e=l.Sb();l.Rb(0,"div",1),l.Rb(1,"div",17),l.Rb(2,"div"),l.Rb(3,"div",4),l.Rb(4,"h5"),l.tc(5," Choose Payment Gateway "),l.Qb(),l.Qb(),l.Rb(6,"div",9),l.Rb(7,"div"),l.Rb(8,"label",18),l.Rb(9,"input",19),l.Zb("ngModelChange",(function(t){return l.lc(e),l.bc().selectedGatewe=t})),l.Qb(),l.tc(10," Paypal "),l.Nb(11,"i",20),l.Qb(),l.Qb(),l.Rb(12,"div"),l.Rb(13,"label",18),l.Rb(14,"input",21),l.Zb("ngModelChange",(function(t){return l.lc(e),l.bc().selectedGatewe=t})),l.Qb(),l.tc(15," Stripe "),l.Nb(16,"i",20),l.Qb(),l.Qb(),l.Qb(),l.Rb(17,"h5"),l.tc(18," Duration (in months)"),l.Qb(),l.Rb(19,"div",9),l.Rb(20,"div",22),l.Rb(21,"input",23),l.Zb("ngModelChange",(function(t){return l.lc(e),l.bc().selectedNoOfMonth=t})),l.Qb(),l.Rb(22,"div",24),l.Rb(23,"span",25),l.tc(24,"Month"),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(25,"div",11),l.Rb(26,"button",26),l.Zb("click",(function(){return l.lc(e),l.bc().proceed()})),l.tc(27,"Proceed"),l.Qb(),l.Qb(),l.Rb(28,"p",14),l.tc(29),l.Qb(),l.Qb(),l.Qb(),l.Qb()}if(2&e){const e=l.bc();l.zb(2),l.Cb("card border-",e.theme," border pricing-card-body"),l.zb(2),l.Cb("text-",e.theme,""),l.zb(3),l.Cb("form-check form-check-",e.theme,""),l.zb(2),l.ec("ngModel",e.selectedGatewe),l.zb(3),l.Cb("form-check form-check-",e.theme,""),l.zb(2),l.ec("ngModel",e.selectedGatewe),l.zb(3),l.Cb("text-",e.theme,""),l.zb(4),l.ec("ngModel",e.selectedNoOfMonth),l.zb(5),l.Cb("btn btn-outline-",e.theme," btn-block cursor-pointer"),l.ec("disabled",e.selectedNoOfMonth<=0||""==e.selectedGatewe),l.zb(3),l.uc(e.package.description)}}let je=(()=>{class e{constructor(e,t,i,n){this.bs=e,this.router=t,this.os=i,this.themeChangeService=n,this.currency=Ue.a,this.show="package",this.selectedNoOfMonth=1,this.package=new Fe.a}ngOnInit(){localStorage.removeItem("buy_package"),this.theme=localStorage.getItem("theme"),this.userId=this.bs.token().id,this.allPackage(),this.themeChange(),this.activePackageHistory()}activePackageHistory(){this.bs.activePackageHistory({id:this.userId}).subscribe(e=>{this.userPackageId=e.packageId._id,this.ativePackageHistoryId=e._id},e=>{console.log(e)})}themeChange(){this.themeChangeService.themeLoad$.subscribe(e=>this.theme=e)}allPackage(){this.bs.allPackage().pipe(Object(de.a)(e=>this.preparePackage(e))).subscribe(e=>{this.allpackage=e},e=>{console.log(e)})}preparePackage(e){let t=[];for(let i in e){let n=this.currency.filter(t=>t.code==e[i].currencySymbol);this.currency.filter(t=>t.code==e[i].currencySymbol),e[i].currencySymbol=n[0].symbol_native,e[i].currencyCode=n[0].code,t.push(e[i])}return t}applyPlan(e){console.log(),0==e.price?(this.tempData={userId:this.userId,packageId:e._id,startDate:new Date},this.updatePlan(this.tempData)):(this.tempData={name:e.name,price:e.price,currencyCode:e.currencyCode,_id:e._id},this.show="payment-select"),this.selectedGatewe="",this.selectedpackage=e}proceed(){this.tempData.duration=this.selectedNoOfMonth,localStorage.setItem("buy_package",JSON.stringify(this.tempData)),"paypal"==this.selectedGatewe&&this.router.navigate(["user/paypal"]),"stripe"==this.selectedGatewe&&this.router.navigate(["user/stripe"]),this.show="package"}updatePlan(e){return Object(ee.a)(this,void 0,void 0,(function*(){yield this.makeInactiveOldPackageHistory(),this.bs.addPackagehistory(e).subscribe(e=>{this.tempData=[],this.activePackageHistory(),this.os.swall("success",e.message)},e=>{console.log(e)})}))}makeInactiveOldPackageHistory(){this.bs.updatePackagehistory({_id:this.ativePackageHistoryId,status:"inactive"}).subscribe(e=>{console.log(e)},e=>{console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(l.Mb(o.a),l.Mb(a.b),l.Mb(k.a),l.Mb(s.a))},e.\u0275cmp=l.Gb({type:e,selectors:[["app-package"]],viewQuery:function(e,t){var i;1&e&&l.pc(Le,!0),2&e&&l.hc(i=l.ac())&&(t.closebtn=i.first)},decls:2,vars:2,consts:[["class","row pricing-table",4,"ngIf"],[1,"row","pricing-table"],["class","col-md-6 col-xl-4 grid-margin stretch-card pricing-card",4,"ngFor","ngForOf"],[1,"col-md-6","col-xl-4","grid-margin","stretch-card","pricing-card"],[1,"text-center","pricing-card-head"],[1,"mt-3","mb-0","plan-cost","text-warning"],[1,"font-weight-normal","mb-4"],[3,"innerHTML"],[1,"col-period"],[1,"plan-features"],[4,"ngFor","ngForOf"],[1,"wrapper"],[3,"class","disabled",4,"ngIf"],[3,"class","click",4,"ngIf"],[1,"mt-3","mb-0","plan-cost","text-gray"],[3,"disabled"],[3,"click"],[1,"center-element","col-md-6","col-xl-4","grid-margin","stretch-card","pricing-card"],[1,"form-check-label"],["type","radio","name","selectedGatewe","value","paypal",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"input-helper"],["type","radio","name","selectedGatewe","value","stripe",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"input-group"],["name","selectedNoOfMonth","type","number","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-prepend"],[1,"input-group-text"],[3,"disabled","click"]],template:function(e,t){1&e&&(l.rc(0,Ye,2,1,"div",0),l.rc(1,$e,30,23,"div",0)),2&e&&(l.ec("ngIf","package"==t.show),l.zb(1),l.ec("ngIf","payment-select"==t.show))},directives:[n.j,n.i,S.o,S.b,S.h,S.k,S.n,S.q],styles:['@charset "UTF-8";ul.plan-features[_ngcontent-%COMP%]{height:200px;overflow-x:hidden;overflow-y:scroll}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:rgba(31,31,35,.8);border:2px solid #fff;display:block!important}li[_ngcontent-%COMP%]:before{content:"\uf197";font-family:FontAwesome;color:#d24571;display:inline-block;margin-left:-1.3em;width:1.3em;margin-right:5px}.blackbg[_ngcontent-%COMP%]{background-color:#000}@media only screen and (max-width:320px){.pricing-card-body[_ngcontent-%COMP%]{padding:30px 10px 23px!important}}.col-period[_ngcontent-%COMP%]{font-size:12px}.center-element[_ngcontent-%COMP%]{margin:auto}']}),e})();var He=i("VFot");let Ve=(()=>{class e{constructor(e,t){this.fb=e,this.stripeService=t,this.elementsOptions={locale:"es"}}ngOnInit(){this.stripeTest=this.fb.group({name:["",[S.s.required]]}),this.stripeService.elements(this.elementsOptions).subscribe(e=>{this.elements=e,this.card||(this.card=this.elements.create("card",{style:{base:{iconColor:"#666EE8",color:"#31325F",lineHeight:"40px",fontWeight:300,fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSize:"18px","::placeholder":{color:"#CFD7E0"}}}}),this.card.mount("#card-element"))})}buy(){const e=this.stripeTest.get("name").value;this.stripeService.createToken(this.card,{name:e}).subscribe(e=>{e.token?console.log(e.token):e.error&&console.log(e.error.message)})}}return e.\u0275fac=function(t){return new(t||e)(l.Mb(S.d),l.Mb(He.b))},e.\u0275cmp=l.Gb({type:e,selectors:[["app-stripe"]],decls:5,vars:1,consts:[["novalidate","",3,"formGroup","ngSubmit"],["type","text","formControlName","name","placeholder","Jane Doe"],["id","card-element",1,"field"],["type","submit"]],template:function(e,t){1&e&&(l.Rb(0,"form",0),l.Zb("ngSubmit",(function(){return t.buy()})),l.Nb(1,"input",1),l.Nb(2,"div",2),l.Rb(3,"button",3),l.tc(4," BUY "),l.Qb(),l.Qb()),2&e&&l.ec("formGroup",t.stripeTest)},directives:[S.u,S.i,S.f,S.b,S.h,S.e],styles:[""]}),e})();const We=["paypal"],Je=[{path:"",component:m,children:[{path:"home",component:f},{path:"service",component:$},{path:"calendar",component:X},{path:"profile",component:Ee.a},{path:"avilablity/:id",component:be},{path:"appointment/:id",component:xe},{path:"my-appointment",component:Te},{path:"package",component:je},{path:"paypal",component:(()=>{class e{constructor(e,t,i,n){this.bs=e,this.router=t,this.os=i,this.themeChangeService=n,this.title="Paypal",this.paidFor=!1}ngAfterViewInit(){}ngOnInit(){this.theme=localStorage.getItem("theme"),this.userId=this.bs.token().id,this.adminPGCredential();let e=JSON.parse(localStorage.getItem("buy_package"));this.selectedpackage=e,console.log(e)}themeChange(){this.themeChangeService.themeLoad$.subscribe(e=>this.theme=e)}addPaypallscript(e){var t=document.createElement("script");t.src="https://www.paypal.com/sdk/js?client-id="+e+"&currency=INR",console.log(t.src),document.body.appendChild(t),setTimeout(()=>{this.paypalStart()},5e3)}adminPGCredential(){this.bs.adminPGCredential().subscribe(e=>{e.paypalId&&this.addPaypallscript(e.paypalId)},e=>{console.log(e)})}paypalStart(){paypal.Buttons({createOrder:(e,t)=>t.order.create({purchase_units:[{amount:{value:"100"}}]}),onApprove:(e,t)=>Object(ee.a)(this,void 0,void 0,(function*(){const e=yield t.order.capture();this.paidFor=!0,console.log(e)})),onError:e=>{console.log(e)}}).render(this.paypalElement.nativeElement)}}return e.\u0275fac=function(t){return new(t||e)(l.Mb(o.a),l.Mb(a.b),l.Mb(k.a),l.Mb(s.a))},e.\u0275cmp=l.Gb({type:e,selectors:[["app-paypal"]],viewQuery:function(e,t){var i;1&e&&l.pc(We,!0),2&e&&l.hc(i=l.ac())&&(t.paypalElement=i.first)},decls:24,vars:7,consts:[[1,"row"],[1,"payment"],[1,"card","card-inverse-secondary","mb-5"],[1,"card-body"],[1,"card-title","text-center"],[1,"font-weight-normal","mb-4","text-warning","small-font","text-center"],[1,"text-mute"],[3,"innerHTML"],[1,"text-danger"],[1,"mt-4","mb-4","text-success","small-font","text-center"],[3,"hidden"],["paypal",""]],template:function(e,t){1&e&&(l.Rb(0,"div",0),l.Rb(1,"div",1),l.Rb(2,"div",2),l.Rb(3,"div",3),l.Rb(4,"h4",4),l.tc(5),l.Qb(),l.Rb(6,"h4",5),l.Rb(7,"span",6),l.tc(8,"@"),l.Qb(),l.Nb(9,"span",7),l.Rb(10,"span"),l.tc(11),l.Qb(),l.tc(12," for "),l.Rb(13,"span",8),l.tc(14),l.Qb(),l.tc(15,"Month"),l.Qb(),l.Rb(16,"h5",9),l.Rb(17,"span",6),l.tc(18," Total Payment : "),l.Qb(),l.Nb(19,"span",7),l.Rb(20,"span"),l.tc(21),l.Qb(),l.Qb(),l.Nb(22,"div",10,11),l.Qb(),l.Qb(),l.Qb(),l.Qb()),2&e&&(l.zb(5),l.uc(t.selectedpackage.name),l.zb(4),l.ec("innerHTML",t.selectedpackage.currencySymbol,l.mc),l.zb(2),l.uc(t.selectedpackage.price),l.zb(3),l.vc(" ",t.selectedpackage.duration," "),l.zb(5),l.ec("innerHTML",t.selectedpackage.currencySymbol,l.mc),l.zb(2),l.vc(" ",t.selectedpackage.price*t.selectedpackage.duration,""),l.zb(1),l.ec("hidden",t.paidFor))},styles:[".payment[_ngcontent-%COMP%]{max-width:500px;min-width:320px;margin:auto}"]}),e})()},{path:"stripe",component:Ve}],canActivate:[v]}];let Ke=(()=>{class e{}return e.\u0275mod=l.Kb({type:e}),e.\u0275inj=l.Jb({factory:function(t){return new(t||e)},imports:[[a.f.forChild(Je)],a.f]}),e})(),Xe=(()=>{class e{}return e.\u0275mod=l.Kb({type:e}),e.\u0275inj=l.Jb({factory:function(t){return new(t||e)},imports:[[n.b,S.g,S.p,re.b,Ke]]}),e})()}}]);